views:
  - title: Home
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: sensor.total_lights_count
            content: >
              {% set lights_on = states('sensor.total_lights_count') | int %} 
              {{ lights_on }}
            icon: |
              {% set lights_on = states('sensor.total_lights_count') | int %}
                  {% if lights_on >= 1 %}
                    mdi:lightbulb
                  {% else %}
                    mdi:lightbulb-outline
                  {% endif %}
            icon_color: |
              {% set lights_on = states('sensor.total_lights_count') | int %}
              {% if lights_on >= 1 %}
                amber
              {% else %}
                darkgray
              {% endif %}
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/lights
          - type: template
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/server-nas
            entity: sensor.ds224plus_volume_1_volume_used
            icon: mdi:server-network
            icon_color: >-
              {% set volume_used = states('sensor.ds224plus_volume_1_volume_used') | int %}
              {% if volume_used >= 90 %}
                red
              {% elif volume_used >= 70 %}
                lime
              {% else %}
                green
              {% endif %}
          - type: template
            entity: lock.front_door_lock
            icon: >
              {% if states('sensor.outer_doors_open') | int > 0 %}
                mdi:door-open
              {% elif is_state('lock.front_door_lock', 'locked') and
               is_state('lock.back_door_lock', 'locked') and
               is_state('lock.garage_handle_lock', 'locked') %}
                mdi:lock
              {% elif is_state('lock.front_door_lock', 'unlocked') and
              is_state('lock.back_door_lock', 'unlocked') and
               is_state('lock.garage_handle_lock', 'unlocked') %}
                mdi:lock-open-variant-outline
              {% else %}
                mdi:lock-open-alert-outline
              {% endif %}
            icon_color: >
              {% if states('sensor.outer_doors_open') | int > 0 %}
                yellow
              {% elif is_state('lock.front_door_lock', 'locked') and
               is_state('lock.back_door_lock', 'locked') and
               is_state('lock.garage_handle_lock', 'locked') %}
                green
              {% elif is_state('lock.front_door_lock', 'unlocked') and
              is_state('lock.back_door_lock', 'unlocked') and
               is_state('lock.garage_handle_lock', 'unlocked') %}
                red
              {% else %}
                default
              {% endif %}
            content: ''
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/locks
          - type: template
            entity: input_select.home_mode
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/bedtime
            icon: |-
              {% if is_state('input_select.home_mode','bedtime')
                and not is_state('binary_sensor.library_door_contact_sensor','on')
                and states('sensor.outer_doors_open') | int < 1
                and is_state('lock.front_door_lock','locked') 
                and is_state('lock.back_door_lock','locked')
                and is_state('switch.fireplace','off')
                and states('sensor.total_leaks_detected') | int < 1
                and is_state('cover.main_garage_door','closed')
                and is_state('cover.side_garage_door','closed') %}
                mdi:sleep
              {% elif is_state('input_select.home_mode','awake') %}
                mdi:eye-outline
              {% else %}
                mdi:home-export-outline
              {% endif %}
            icon_color: |-
              {% if is_state('input_select.home_mode','bedtime')
                and not is_state('binary_sensor.library_door_contact_sensor','on')
                and states('sensor.outer_doors_open') | int < 1
                and is_state('lock.front_door_lock','locked') 
                and is_state('lock.back_door_lock','locked')
                and is_state('switch.fireplace','off')
                and states('sensor.total_leaks_detected') | int < 1
                and is_state('cover.main_garage_door','closed')
                and is_state('cover.side_garage_door','closed') %}
                green
              {% else %}
                default
              {% endif %}
            content: ''
          - type: template
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/leaks
            entity: input_boolean.leak_detected
            icon: |-
              {% if is_state('input_boolean.leak_detected','on') %}
                mdi:water-alert
              {% elif is_state('binary_sensor.ecolink_firefighter','on') %}
                mdi:fire
              {% else %}
                mdi:home-outline
              {% endif %}
            icon_color: >-
              {% if is_state('input_boolean.leak_detected','on') or
              is_state('binary_sensor.ecolink_firefighter','on') %}
                red
              {% else %}
                green
              {% endif %}
            content: |-
              {% if is_state('input_boolean.leak_detected','on') %}
                Wet
              {% elif is_state('binary_sensor.ecolink_firefighter','on') %}
                Fire
              {% else %}
                
              {% endif %}
          - type: template
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/garden
            entity: plant.catnip
            icon: |-
              {% set status = states('plant.catnip') %}
              {% if status == 'ok'  %}
                mdi:flower
              {% else %}
                mdi:flower-outline
              {% endif %}
            icon_color: |-
              {% set status = states('plant.catnip') %}
              {% if status == 'ok'  %}
                green
              {% else %}
                red
              {% endif %}
          - type: template
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/dog
            entity: input_datetime.dog_out_potty_last_time
            icon: >-
              {% set last_time = states('input_datetime.dog_out_potty_last_time') %}
              {% if last_time != 'unknown' and last_time != '' %}
                {% set last_timestamp = as_timestamp(last_time) %}
                {% if last_timestamp and (now().timestamp() - last_timestamp) <= 14400 %}
                  mdi:dog-side
                {% else %}
                  mdi:dog-side-off
                {% endif %}
              {% else %}
                mdi:dog-side-off
              {% endif %}
            icon_color: >-
              {% set last_time = states('input_datetime.dog_out_potty_last_time') %}
              {% if last_time != 'unknown' and last_time != '' %}
                {% set last_timestamp = as_timestamp(last_time) %}
                {% if last_timestamp and (now().timestamp() - last_timestamp) <= 14400 %}
                  green
                {% else %}
                  red
                {% endif %}
              {% else %}
                red
              {% endif %}
        alignment: center
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: >
              {{ states('sensor.ws2902_weather_temperature') | round(0) }}°/{{ states('sensor.ws2902_weather_humidity') }}%
            secondary: ''
            icon: >
              {% if states('weather.pirateweather') in ['cloudy'] %}
                mdi:cloud
              {% elif states('weather.pirateweather') in ['partlycloudy'] %}
                mdi:weather-partly-cloudy
              {% elif states('weather.pirateweather') in ['sunny','exceptional'] %}
                mdi:white-balance-sunny
              {% elif states('weather.pirateweather') in ['snowy','snowy-rainy','hail'] %}
                mdi:weather-snowy-heavy
              {% elif states('weather.pirateweather') in ['rainy','pouring'] %}
                mdi:weather-pouring
              {% elif states('weather.pirateweather') in ['lightning','lightning-rainy'] %}
                mdi:weather-lightning
              {% elif states('weather.pirateweather') in ['windy','windy-variant'] %}
                mdi:weather-windy
              {% elif states('weather.pirateweather') in ['clear-night'] %}
                mdi:weather-night
              {% elif states('weather.pirateweather') in ['fog'] %}
                mdi:weather-fog
              {% endif %}
            tap_action:
              action: navigate
              navigation_path: house
            color: |-
              {% set aqi = states('sensor.outdoor_aqi') | float(0) %}
              {% if aqi <= 50 %}
                green
              {% elif aqi <= 100 %}
                yellow
              {% elif aqi <= 150 %}
                orange
              {% elif aqi <= 200 %}
                red
              {% elif aqi <= 300 %}
                purple
              {% else %}
                maroon
              {% endif %}
            vertical: true
            features_position: bottom
          - type: custom:mushroom-template-card
            primary: >
              {{ states('sensor.ecobee_thermostat_current_temperature') | round(0) }}°/{{ states('sensor.main_floor_humidity') | round(0) }}%
            secondary: ''
            icon: >-
              {% if is_state_attr('climate.ecobee_thermostat', 'hvac_action', 'idle') %}
                mdi:thermometer-off
              {% elif states('climate.ecobee_thermostat') == 'heat' %}
                mdi:thermometer-high
              {% elif states('climate.ecobee_thermostat') == 'cool' %}
                mdi:thermometer-low
              {% else %}
                mdi:thermometer
              {% endif %}
            icon_color: |
              {% if states('climate.ecobee_thermostat') == 'heat' %}
                orange
              {% elif states('climate.ecobee_thermostat') == 'cool' %}
                blue
              {% elif states('climate.ecobee_thermostat') == 'heat_cool' %}
                green
              {% else %}
                default
              {% endif %}
            layout: vertical
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/ecobee
            badge_icon: >-
              {% if state_attr('climate.ecobee_thermostat', 'fan_mode') == 'on' %}
                mdi:fan
              {% else %}
                mdi:fan-off
              {% endif %}
            badge_color: >-
              {% if state_attr('climate.ecobee_thermostat', 'fan_mode') == 'on' %}
                green
              {% else %}
                default
              {% endif %}
          - type: custom:mushroom-template-card
            primary: >-
              {% if (is_state('vacuum.d10_plus_gen_2_main_floor','cleaning') and
              is_state('vacuum.d10_plus_gen_2_upstairs','cleaning') and 
              is_state('vacuum.d10_plus_gen_2_basement','cleaning')) %}
                All 3
              {% elif (is_state('vacuum.d10_plus_gen_2_main_floor','cleaning')
              and is_state('vacuum.d10_plus_gen_2_upstairs','cleaning')) %}
                Main/Up
              {% elif (is_state('vacuum.d10_plus_gen_2_main_floor','cleaning')
              and is_state('vacuum.d10_plus_gen_2_basement','cleaning')) %}
                Main/Base
              {% elif (is_state('vacuum.d10_plus_gen_2_upstairs','cleaning') and
              is_state('vacuum.d10_plus_gen_2_basement','cleaning')) %}
                Up/Base
              {% elif is_state('vacuum.d10_plus_gen_2_upstairs','cleaning') %}
                Upstairs
              {% elif is_state('vacuum.d10_plus_gen_2_main_floor','cleaning') %}
                Main
              {% elif is_state('vacuum.d10_plus_gen_2_basement','cleaning') %}
                Cellar
              {% else %}
                Idle
              {% endif %}
            secondary: ''
            icon: >
              {% set vacs_on = (is_state('vacuum.d10_plus_gen_2_main_floor', 'cleaning') 
              or is_state('vacuum.d10_plus_gen_2_upstairs', 'cleaning') 
              or is_state('vacuum.d10_plus_gen_2_basement', 'cleaning')) %} 
              {% if vacs_on %}
                mdi:vacuum
              {% else %}
                mdi:vacuum-outline
              {% endif %}
            tap_action:
              action: navigate
              navigation_path: vacuums
            color: >
              {% set vacs_on = (is_state('vacuum.d10_plus_gen_2_main_floor', 'cleaning') 
              or is_state('vacuum.d10_plus_gen_2_upstairs', 'cleaning') 
              or is_state('vacuum.d10_plus_gen_2_basement', 'cleaning')) %} 
              {% if vacs_on %}
                green
              {% else %}
                grey
              {% endif %}
            vertical: true
            features_position: bottom
          - type: custom:mushroom-template-card
            primary: |
              {% set main = states('cover.main_garage_door') %}
              {% set side = states('cover.side_garage_door') %}

              {% if main == 'open' or side == 'open' %}
                Open
              {% elif main == 'opening' or side == 'opening' %}
                Opening
              {% elif main == 'closing' or side == 'closing' %}
                Closing
              {% elif main == 'unavailable' or side == 'unavailable' %}
                Unavailable
              {% else %}
                Closed
              {% endif %}
            secondary: ''
            icon: |
              {% set main = states('cover.main_garage_door') %}
              {% set side = states('cover.side_garage_door') %}

              {% if main in ['open','opening'] or side in ['open','opening'] %}
                mdi:garage-open-variant
              {% elif main == 'closing' or side == 'closing' %}
                mdi:garage-variant
              {% elif main == 'unavailable' or side == 'unavailable' %}
                mdi:garage-alert
              {% else %}
                mdi:garage-variant
              {% endif %}
            icon_color: |
              {% set main = states('cover.main_garage_door') %}
              {% set side = states('cover.side_garage_door') %}

              {% if main == 'open' or side == 'open' %}
                red
              {% elif main == 'opening' or side == 'opening' %}
                orange
              {% elif main == 'closing' or side == 'closing' %}
                orange
              {% elif main == 'unavailable' or side == 'unavailable' %}
                yellow
              {% else %}
                green
              {% endif %}
            layout: vertical
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/garage
      - type: custom:mushroom-title-card
        title: Rooms
        title_tap_action:
          action: none
        subtitle_tap_action:
          action: none
      - type: vertical-stack
        cards:
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                name: Living Room
                icon: mdi:sofa
                tap_action:
                  action: navigate
                  navigation_path: livingroom
                entity: sensor.living_room_ep1_temperature
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: >
                            {% if is_state('light.zigbee_group_living_room','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_living_room
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_living_room', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.living_room_ep1_occupancy','on') %}
                              mdi:account
                            {% else %}
                              mdi:account-outline
                            {% endif %}
                          entity: binary_sensor.living_room_ep1_occupancy
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('binary_sensor.living_room_ep1_occupancy', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: toggle
                          icon: mdi:fireplace
                          entity: switch.fireplace
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(210, 53, 69, 1)' if is_state('switch.fireplace', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }   
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 80px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background: '#15181'
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
              - type: custom:button-card
                name: Kitchen
                icon: mdi:fridge
                entity: sensor.kitchen_ep1_temperature
                tap_action:
                  action: navigate
                  navigation_path: kitchen
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: |
                            {% if is_state('light.zigbee_group_kitchen','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_kitchen
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_kitchen', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.kitchen_ep1_occupancy','on') %}
                              mdi:account
                            {% else %}
                              mdi:account-outline
                            {% endif %}
                          entity: binary_sensor.kitchen_ep1_occupancy
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('binary_sensor.kitchen_ep1_occupancy', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.kitchen_sink_water_leak_sensor_water_leak_detected','on')
                            and is_state('input_boolean.leak_detected','on') %}
                              mdi:water
                            {% else %}
                              mdi:water-outline
                            {% endif %}
                          entity: >-
                            binary_sensor.kitchen_sink_water_leak_sensor_water_leak_detected
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(220, 53, 69, 1)' if is_state('binary_sensor.kitchen_sink_water_leak_sensor_water_leak_detected', 'on') and is_state('input_boolean.leak_detected','on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 132px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background: '#15181'
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
            columns: 2
      - type: vertical-stack
        cards:
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                name: Bedroom
                icon: mdi:bed
                tap_action:
                  action: navigate
                  navigation_path: masterbedroom
                entity: sensor.s1_pro_bedroom_temperature
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: |
                            {% if is_state('light.zigbee_group_bedroom','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_bedroom
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_bedroom', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.bedroom_derived_ep1_occupancy','on') %}
                              mdi:account
                            {% else %}
                              mdi:account-outline
                            {% endif %}
                          entity: binary_sensor.bedroom_derived_ep1_occupancy
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('binary_sensor.bedroom_derived_ep1_occupancy', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: mdi:ceiling-fan
                          entity: fan.bedroom_fan
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('fan.bedroom_fan', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }   
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 80px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background:15181"#FFC47E"
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
              - type: custom:button-card
                name: Main Bath
                icon: mdi:bathtub
                entity: sensor.master_bath_temp
                tap_action:
                  action: navigate
                  navigation_path: masterbath
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: >
                            {% if is_state('light.zigbee_group_main_bath','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_main_bath
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_main_bath', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.master_bath_ep1_occupancy','on') %}
                              mdi:account
                            {% else %}
                              mdi:account-outline
                            {% endif %}
                          entity: binary_sensor.master_bath_ep1_occupancy
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('binary_sensor.master_bath_ep1_occupancy', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.shower_in_use','on') %}
                              mdi:shower-head
                            {% else %}
                              mdi:shower
                            {% endif %}
                          entity: binary_sensor.shower_in_use
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(220, 53, 69, 1)' if is_state('binary_sensor.shower_in_use', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 132px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background: '#15181'
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
            columns: 2
      - type: vertical-stack
        cards:
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                name: Front Porch
                icon: mdi:doorbell-video
                tap_action:
                  action: navigate
                  navigation_path: frontporch
                entity: sensor.ws2902_weather_temperature
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: >
                            {% if is_state('light.zigbee_group_front_porch','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_front_porch
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_front_porch', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.doorbell_person','on') %}
                              mdi:account
                            {% else %}
                              mdi:account-outline
                            {% endif %}
                          entity: binary_sensor.doorbell_person
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('binary_sensor.doorbell_person', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: toggle
                          icon: |
                            {% if is_state('lock.front_door_lock','unlocked') %}
                              mdi:lock-open-variant
                            {% else %}
                              mdi:lock
                            {% endif %}
                          entity: lock.front_door_lock
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(220, 53, 69, 1)' if is_state('lock.front_door_lock', 'unlocked') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 80px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background: '#15181'
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
              - type: custom:button-card
                name: Garage
                icon: mdi:garage-variant
                entity: sensor.garage_ep1_temperature
                tap_action:
                  action: navigate
                  navigation_path: garage
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: |
                            {% if is_state('light.zigbee_group_garage','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_garage
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_garage', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.garage_ep1_occupancy','on') %}
                              mdi:account
                            {% else %}
                              mdi:account-outline
                            {% endif %}
                          entity: binary_sensor.garage_ep1_occupancy
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('binary_sensor.garage_ep1_occupancy', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: toggle
                          icon: >
                            {% if is_state('lock.garage_handle_lock','unlocked') %}
                              mdi:lock-open-variant
                            {% else %}
                              mdi:lock
                            {% endif %}
                          entity: lock.garage_handle_lock
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(220, 53, 69, 1)' if is_state('lock.garage_handle_lock', 'unlocked') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 132px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background: '#15181'
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
            columns: 2
      - type: vertical-stack
        cards:
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                name: Bathroom
                icon: mdi:toilet
                tap_action:
                  action: navigate
                  navigation_path: bathroom
                entity: sensor.bathroom_motion_sensor_temperature
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: >
                            {% if is_state('light.zigbee_group_bathroom','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_bathroom
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_bathroom', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.bathroom_ep1_occupancy','on') %}
                              mdi:account
                            {% else %}
                              mdi:account-outline
                            {% endif %}
                          entity: binary_sensor.bathroom_ep1_occupancy
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('binary_sensor.bathroom_ep1_occupancy', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.bathroom_water_leak_sensor_water_leak_detected','on')
                            and is_state('input_boolean.leak_detected','on') %}
                              mdi:water
                            {% else %}
                              mdi:water-outline
                            {% endif %}
                          entity: >-
                            binary_sensor.bathroom_water_leak_sensor_water_leak_detected
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(220, 53, 69, 1)' if is_state('binary_sensor.bathroom_water_leak_sensor_water_leak_detected', 'on') and is_state('input_boolean.leak_detected','on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }   
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 80px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background: '#15181'
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
              - type: custom:button-card
                name: Basement
                icon: mdi:home-floor-b
                entity: sensor.basement_temp_humidity_sensor_temperature
                tap_action:
                  action: navigate
                  navigation_path: basement
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: >
                            {% if is_state('light.zigbee_group_basement','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_basement
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_basement', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.basement_door_contact_sensor','on') %}
                              mdi:account
                            {% else %}
                              mdi:account-outline
                            {% endif %}
                          entity: binary_sensor.basement_door_contact_sensor
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('binary_sensor.basement_door_contact_sensor', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.washing_machine_running','on') %}
                              mdi:washing-machine
                            {% elif is_state('input_boolean.dryer_running','on') %}
                              mdi:tumble-dryer
                            {% else %}
                              mdi:washing-machine-off
                            {% endif %}
                          entity: binary_sensor.washing_machine_running
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if (is_state('binary_sensor.washing_machine_running', 'on') or is_state('input_boolean.dryer_running','on')) else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 132px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background: '#15181'
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
            columns: 2
      - type: vertical-stack
        cards:
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                name: Library
                icon: mdi:bookshelf
                tap_action:
                  action: navigate
                  navigation_path: library
                entity: sensor.library_ep1_temperature
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: |
                            {% if is_state('light.zigbee_group_library','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_library
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_library', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.library_ep1_occupancy','on') %}
                              mdi:account
                            {% else %}
                              mdi:account-outline
                            {% endif %}
                          entity: binary_sensor.library_ep1_occupancy
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('binary_sensor.library_ep1_occupancy', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: mdi:ceiling-fan
                          entity: fan.office_fan
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('fan.office_fan', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }   
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 80px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background: '#15181'
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
              - type: custom:button-card
                name: Meditation
                icon: mdi:meditation
                entity: sensor.meditation_ep1_temperature
                tap_action:
                  action: navigate
                  navigation_path: meditation
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: >
                            {% if is_state('light.zigbee_group_meditation','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_meditation
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_meditation', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.meditation_ep1_occupancy','on') %}
                              mdi:account
                            {% else %}
                              mdi:account-outline
                            {% endif %}
                          entity: binary_sensor.meditation_ep1_occupancy
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('binary_sensor.meditation_ep1_occupancy', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: mdi:meditation
                          entity: input_boolean.is_meditating
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('input_boolean.is_meditating', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 132px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background: '#15181'
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
            columns: 2
      - type: vertical-stack
        cards:
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                name: Dining Room
                icon: mdi:table-chair
                tap_action:
                  action: navigate
                  navigation_path: diningroom
                entity: sensor.ecobee_thermostat_current_temperature
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: >
                            {% if is_state('light.zigbee_group_dining_room','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_dining_room
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_dining_room', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.dining_room_ep1_occupancy','on') %}
                              mdi:account
                            {% else %}
                              mdi:account-outline
                            {% endif %}
                          entity: binary_sensor.ecobee_thermostat_motion
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('binary_sensor.dining_room_ep1_occupancy', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: toggle
                          icon: |
                            {% if is_state('lock.back_door_lock','unlocked') %}
                              mdi:lock-open-variant
                            {% else %}
                              mdi:lock
                            {% endif %}
                          entity: lock.back_door_lock
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(220, 53, 69, 1)' if is_state('lock.back_door_lock', 'unlocked') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }   
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 80px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background: '#15181'
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
              - type: custom:button-card
                name: Drone Room
                icon: mdi:quadcopter
                entity: sensor.drone_room_motion_sensor_temperature
                tap_action:
                  action: navigate
                  navigation_path: droneroom
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: >
                            {% if is_state('light.zigbee_group_drone_room','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_drone_room
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_drone_room', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.drone_room_motion_sensor_motion','on') %}
                              mdi:account
                            {% else %}
                              mdi:account-outline
                            {% endif %}
                          entity: binary_sensor.drone_room_motion_sensor_motion
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('binary_sensor.drone_room_motion_sensor_motion', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: toggle
                          icon: mdi:quadcopter
                          entity: switch.drone_charger
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('switch.drone_charger', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 132px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background: '#15181'
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
            columns: 2
      - type: vertical-stack
        cards:
          - square: false
            type: grid
            cards:
              - type: custom:button-card
                name: Hallway
                icon: mdi:hanger
                tap_action:
                  action: navigate
                  navigation_path: hallway
                entity: sensor.ecobee_thermostat_current_temperature
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: |
                            {% if is_state('light.zigbee_group_hallway','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_hallway
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_hallway', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: >
                            {% if is_state('binary_sensor.hallway_closet_contact_sensor','on') %}
                              mdi:account
                            {% else %}
                              mdi:account-outline
                            {% endif %}
                          entity: binary_sensor.hallway_closet_contact_sensor
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 128, 0, 1)' if is_state('binary_sensor.hallway_closet_contact_sensor', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: more-info
                          icon: mdi:battery
                          entity: sensor.hallway_closet_contact_sensor_battery
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(220, 53, 69, 1)' if states('sensor.hallway_closet_contact_sensor_battery') | int < 25 else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }   
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 80px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background: '#15181'
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
              - type: custom:button-card
                name: Upstairs
                icon: mdi:home-floor-2
                entity: sensor.upstairs_temp
                tap_action:
                  action: navigate
                  navigation_path: upstairs
                custom_fields:
                  btn:
                    card:
                      type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          tap_action:
                            action: toggle
                          icon: >
                            {% if is_state('light.zigbee_group_upstairs','on') %}
                              mdi:lamp
                            {% else %}
                              mdi:lamp-outline
                            {% endif %}
                          entity: light.zigbee_group_upstairs
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(0, 123, 255, 1)' if is_state('light.zigbee_group_upstairs', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: perform-action
                            perform_action: script.upstairs_bright
                          icon: mdi:flash
                          entity: script.upstairs_bright
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(138, 205, 215, 1)' if is_state('light.upstairs', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                        - type: template
                          tap_action:
                            action: perform-action
                            perform_action: script.upstairs_dimmed
                          icon: mdi:lightbulb-on-40
                          entity: script.upstairs_dimmed
                          card_mod:
                            style: |
                              ha-card {
                                --chip-background: {{ 'rgba(138, 205, 215, 1)' if is_state('light.upstairs', 'on') else 'rgba(0, 0, 0, 0)' }};
                                padding: 5px!important;
                                border-radius: 100px!important;
                              }
                styles:
                  grid:
                    - grid-template-areas: '"n btn" "s btn" "i btn"'
                    - grid-template-columns: 1fr min-content
                    - grid-template-rows: min-content min-content 1fr
                  card:
                    - padding: 10px 8px 10px 22px
                  custom_fields:
                    btn:
                      - justify-content: end
                      - align-self: start
                  name:
                    - justify-self: start
                    - align-self: start
                    - font-size: 17px
                    - font-weight: 500
                    - color: white
                  state:
                    - min-height: 132px
                    - justify-self: start
                    - align-self: start
                    - font-size: 14px
                    - opacity: '0.7'
                  img_cell:
                    - justify-content: start
                    - position: absolute
                    - width: 180px
                    - height: 200px
                    - left: 0
                    - bottom: 0
                    - margin: 0 0 -20px -20px
                    - background: '#15181'
                    - border-radius: 500px
                  icon:
                    - width: 100px
                    - color: white
                    - opacity: '0.75'
                show_state: true
            columns: 2
    icon: mdi:home
  - title: Living Room
    path: livingroom
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: binary_sensor.living_room_ep1_occupancy
            icon: |
              {% if is_state('binary_sensor.living_room_ep1_occupancy', 'on') %}
                mdi:account
              {% else %}
                mdi:account-outline
              {% endif %}
            content: ''
            tap_action:
              action: more-info
            icon_color: |-
              {% if is_state('binary_sensor.living_room_ep1_occupancy', 'on') %}
                lime
              {% else %}

              {% endif %}
          - type: template
            entity: sensor.living_room_ep1_illuminance
            icon: |
              {% if states('sensor.living_room_ep1_illuminance') | float > 0 %}
                mdi:white-balance-sunny
              {% else %}
                mdi:weather-sunny
              {% endif %}
            content: >
              {{ states('sensor.living_room_ep1_illuminance') | float | round(0)
              }}lx
            icon_color: |
              {% if states('sensor.living_room_ep1_illuminance') | float > 0 %}
                yellow
              {% else %}
                default
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.living_room_ep1_temperature
            icon: mdi:thermometer
            content: >
              {{ states('sensor.living_room_ep1_temperature') | float | round(0) }}°F
            icon_color: >
              {% set temp = states('sensor.living_room_ep1_temperature') | float %} 
              {% if temp <= 32 %}
                blue
              {% elif temp <= 68 %}
                cyan
              {% elif temp <= 77 %}
                green
              {% elif temp <= 86 %}
                yellow
              {% elif temp <= 95 %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.living_room_ep1_humidity
            icon: mdi:water-percent
            icon_color: >
              {% set humidity = states('sensor.living_room_ep1_humidity') | float %} 
              {% if humidity <= 50 %}
                green
              {% elif humidity <= 60 %}
                lime
              {% else %}
                red
              {% endif %}
            content: >
              {{ states('sensor.living_room_ep1_humidity') | float | round(0) }}%
            tap_action:
              action: more-info
          - type: template
            entity: sensor.apollo_air_1_sen55_voc
            icon: mdi:air-purifier
            icon_color: |-
              {% set voc = states('sensor.apollo_air_1_sen55_voc') | int(0) %}
              {% if voc <= 100 %}
                green
              {% elif voc <= 200 %}
                yellow
              {% elif voc <= 300 %}
                orange
              {% elif voc <= 400 %}
                red
              {% else %}
                purple
              {% endif %}
            content: |
              {{ states('sensor.apollo_air_1_sen55_voc') | int }}
            tap_action:
              action: more-info
        alignment: center
      - type: horizontal-stack
        cards:
          - show_name: true
            show_icon: true
            type: button
            tap_action:
              action: toggle
            entity: switch.fireplace
            name: Fireplace
            show_state: true
            icon_height: 75px
            icon: mdi:fireplace
      - type: custom:mushroom-legacy-template-card
        primary: Christmas Tree
        secondary: ''
        icon: |-
          {% if is_state('switch.christmas_tree_all','on') %}
            mdi:pine-tree
          {% else %}
            mdi:pine-tree-box
          {% endif %}
        icon_color: |-
          {% if is_state('switch.christmas_tree_all','on') %}
            green
          {% else %}
            red
          {% endif %}
        entity: switch.christmas_tree_all
        layout: vertical
        fill_container: false
        card_mod:
          style: |
            :host {
              --mush-icon-symbol-size: 1.1em;
            }
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.white_relax
                name: Relax
                tap_action:
                  action: call-service
                  service: script.white_relax
                  service_data:
                    target_lights: light.zigbee_group_living_room
                secondary_info: none
                fill_container: false
                layout: vertical
                icon: mdi:sofa-single
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Energize
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.zigbee_group_living_room
                secondary_info: none
                layout: vertical
                icon: mdi:flash
              - type: custom:mushroom-entity-card
                entity: script.dimmed
                name: Dimmed
                tap_action:
                  action: call-service
                  service: script.dimmed
                  service_data:
                    target_lights: light.zigbee_group_living_room
                secondary_info: none
                layout: vertical
                icon: mdi:weather-night
              - type: custom:mushroom-entity-card
                entity: script.nightlight
                name: Nightlight
                tap_action:
                  action: call-service
                  service: script.nightlight
                  service_data:
                    target_lights: light.zigbee_group_living_room
                secondary_info: none
                layout: vertical
                icon: mdi:led-on
              - type: custom:mushroom-entity-card
                entity: input_boolean.movie_time
                name: Movie
                tap_action:
                  action: toggle
                secondary_info: none
                layout: vertical
                icon: mdi:movie-open
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_living_room
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.floor_lamp
                name: Floor Lamp
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.grandfather_clock
                fill_container: false
                show_brightness_control: true
                use_light_color: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.glass_shelf_top
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.glass_shelf_bottom
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.top_of_clock
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.top_of_clock_2
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.end_table_1
                name: End Table 1
                fill_container: true
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.end_table_2
                name: End Table 2
                fill_container: true
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.tv
                name: TV Light
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
    icon: mdi:sofa
  - title: Kitchen
    path: kitchen
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: binary_sensor.kitchen_ep1_occupancy
            icon: |
              {% if is_state('binary_sensor.kitchen_ep1_occupancy', 'on') %}
                mdi:account
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.kitchen_ep1_occupancy', 'on') %}
                lime
              {% else %}
                
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.kitchen_ep1_illuminance
            icon: |
              {% if states('sensor.kitchen_ep1_illuminance') | float > 0 %}
                mdi:white-balance-sunny
              {% else %}
                mdi:weather-sunny
              {% endif %}
            content: >-
              {{ states('sensor.kitchen_ep1_illuminance') | float | round(0) }}lx
            icon_color: |
              {% if states('sensor.kitchen_ep1_illuminance') | float > 0 %}
                yellow
              {% else %}
                default
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.kitchen_ep1_temperature
            icon: mdi:thermometer
            content: >-
              {{ states('sensor.kitchen_ep1_temperature') | float | round(0) }}°F
            icon_color: >
              {% set temp = states('sensor.kitchen_ep1_temperature') | float %}  
              {% if temp <= 32 %}
                blue
              {% elif temp <= 68 %}
                cyan
              {% elif temp <= 77 %}
                green
              {% elif temp <= 86 %}
                yellow
              {% elif temp <= 95 %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.kitchen_ep1_humidity
            icon: mdi:water-percent
            icon_color: >
              {% set humidity = states('sensor.kitchen_ep1_humidity') | float %}
              {% if humidity <= 50 %}
                green
              {% elif humidity <= 60 %}
                lime
              {% else %}
                red
              {% endif %}
            content: |
              {{ states('sensor.kitchen_ep1_humidity') | float | round(0) }}%
            tap_action:
              action: more-info
          - type: template
            entity: sensor.kitchen_co2
            icon: mdi:molecule-co2
            icon_color: |-
              {% set co2 = states('sensor.kitchen_co2') | int(0) %} 
              {% if co2 <= 600 %} 
                green 
              {% elif co2 <= 1000 %} 
                yellow 
              {% elif co2 <= 1500 %} 
                orange 
              {% elif co2 <= 2000 %} 
                red 
              {% else %} 
                purple 
              {% endif %}
            content: |
              {{ states('sensor.kitchen_co2') | float | round(0) }}
            tap_action:
              action: more-info
        alignment: center
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: >-
              {% if is_state('binary_sensor.kitchen_sink_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}

              {% else %}
                Leak Detected
              {% endif %}
            secondary: Kitchen Sink
            icon: >-
              {% if is_state('binary_sensor.kitchen_sink_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}
                mdi:water-outline
              {% else %}
                mdi:water-alert
              {% endif %}
            entity: binary_sensor.kitchen_sink_water_leak_sensor_water_leak_detected
            badge_icon: ''
            tap_action:
              action: more-info
            color: >-
              {% if is_state('binary_sensor.kitchen_sink_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}
                green
              {% else %}
                red
              {% endif %}
            vertical: true
            features_position: bottom
        visibility:
          - condition: state
            entity: binary_sensor.kitchen_sink_water_leak_sensor_water_leak_detected
            state: 'on'
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.white_relax
                name: Relax
                tap_action:
                  action: call-service
                  service: script.white_relax
                  service_data:
                    target_lights: light.zigbee_group_kitchen
                layout: vertical
                icon: mdi:sofa-single
                secondary_info: none
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Energize
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.zigbee_group_kitchen
                layout: vertical
                icon: mdi:flash
                secondary_info: none
              - type: custom:mushroom-entity-card
                entity: script.dimmed
                name: Dimmed
                tap_action:
                  action: call-service
                  service: script.dimmed
                  service_data:
                    target_lights: light.zigbee_group_kitchen
                layout: vertical
                secondary_info: none
                icon: mdi:lightbulb-on-40
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_kitchen
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.cupboard_1
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.cupboard_2
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.cupboard_3
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.cupboard_4
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.cupboard_5
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.cupboard_6
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.cupboard_7
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.cupboard_8
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.sink
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
    icon: mdi:fridge
  - title: Master Bedroom
    path: masterbedroom
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: binary_sensor.bedroom_derived_ep1_occupancy
            icon: >
              {% if is_state('binary_sensor.bedroom_derived_ep1_occupancy', 'on') %}
                mdi:account
              {% else %}
                mdi:account-outline
              {% endif %}
            content: ''
            tap_action:
              action: more-info
            icon_color: >-
              {% if is_state('binary_sensor.bedroom_derived_ep1_occupancy', 'on') %}
                lime
              {% else %}
                
              {% endif %}
          - type: template
            entity: sensor.s1_pro_bedroom_ambient_light_lux
            icon: >
              {% if states('sensor.s1_pro_bedroom_ambient_light_lux') | float(0) | round(0) > 0 %}
                mdi:white-balance-sunny
              {% else %}
                mdi:weather-sunny
              {% endif %}
            content: >
              {{ states('sensor.s1_pro_bedroom_ambient_light_lux') | round(0) }}lx
            icon_color: >
              {% if states('sensor.s1_pro_bedroom_ambient_light_lux') | float(0) | round(0) > 0 %}
                yellow
              {% else %}
                default
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.s1_pro_bedroom_temperature
            icon: mdi:thermometer
            content: >
              {{ states('sensor.s1_pro_bedroom_temperature') | float | round(0) }}°F
            icon_color: >
              {% set temp = states('sensor.s1_pro_bedroom_temperature') | float %} 
              {% if temp <= 32 %}
                blue
              {% elif temp <= 68 %}
                cyan
              {% elif temp <= 77 %}
                green
              {% elif temp <= 86 %}
                yellow
              {% elif temp <= 95 %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.s1_pro_bedroom_humidity
            icon: mdi:water-percent
            icon_color: >
              {% set humidity = states('sensor.s1_pro_bedroom_humidity') | float %} 
              {% if humidity <= 50 %}
                green
              {% elif humidity <= 60 %}
                lime
              {% else %}
                red
              {% endif %}
            content: |
              {{ states('sensor.s1_pro_bedroom_humidity') | float | round(0) }}%
            tap_action:
              action: more-info
          - type: template
            entity: sensor.s1_pro_bedroom_co2
            icon: mdi:molecule-co2
            icon_color: >-
              {% set co2 = states('sensor.s1_pro_bedroom_co2') | int(0) %} 
              {% if co2 <= 600 %} 
                green 
              {% elif co2 <= 1000 %} 
                yellow 
              {% elif co2 <= 1500 %} 
                orange 
              {% elif co2 <= 2000 %} 
                red 
              {% else %} 
                purple 
              {% endif %}
            content: |
              {{ states('sensor.s1_pro_bedroom_co2') | float | round(0) }}
            tap_action:
              action: more-info
        alignment: center
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-fan-card
            entity: fan.bedroom_fan
            name: Ceiling Fan
            tap_action:
              action: more-info
            show_percentage_control: true
            show_oscillate_control: false
            icon_animation: true
            collapsible_controls: false
            fill_container: false
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.white_relax
                name: Relax
                tap_action:
                  action: call-service
                  service: script.white_relax
                  service_data:
                    target_lights: light.zigbee_group_bedroom
                secondary_info: none
                layout: vertical
                icon: mdi:sofa-single
              - type: custom:mushroom-entity-card
                entity: script.white_relax
                name: Reading
                tap_action:
                  action: call-service
                  service: script.white_relax
                  service_data:
                    target_lights: light.zigbee_group_bedroom
                    brightness: 55
                secondary_info: none
                layout: vertical
                icon: mdi:book-open-variant
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Energize
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.zigbee_group_bedroom
                secondary_info: none
                layout: vertical
                icon: mdi:flash
              - type: custom:mushroom-entity-card
                entity: script.nightlight
                name: Nightlight
                tap_action:
                  action: call-service
                  service: script.nightlight
                  service_data:
                    target_lights: light.zigbee_group_bedroom
                secondary_info: none
                layout: vertical
                icon: mdi:weather-night
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_bedroom
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.bedside_table
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.corner_1
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.nightstand
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.window
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
      - type: custom:mushroom-title-card
        title: ''
        subtitle: Closet
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Closet Door
            secondary: |-
              {% if is_state('binary_sensor.closet_contact_sensor','off') %}
                Closed
              {% elif is_state('binary_sensor.closet_contact_sensor','on') %}
                Open
              {% else %}
                Unavailable
              {% endif %}
            icon: |-
              {% if is_state('binary_sensor.closet_contact_sensor','off') %}
                mdi:door-closed
              {% elif is_state('binary_sensor.closet_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed-cancel
              {% endif %}
            entity: binary_sensor.closet_contact_sensor
            icon_color: |-
              {% if is_state('binary_sensor.closet_contact_sensor','off') %}
                green
              {% elif is_state('binary_sensor.closet_contact_sensor','on') %}
                red
              {% else %}
                yellow
              {% endif %}
            badge_icon: >-
              {% set battery_level = states('sensor.closet_contact_sensor_battery') | int %}

              {% if battery_level >= 95 %}
                mdi:battery
              {% elif battery_level >= 80 %}
                mdi:battery-90
              {% elif battery_level >= 60 %}
                mdi:battery-70
              {% elif battery_level >= 40 %}
                mdi:battery-50
              {% elif battery_level >= 20 %}
                mdi:battery-30
              {% else %}
                mdi:battery-alert
              {% endif %}
            badge_color: >-
              {% set battery_level = states('sensor.closet_contact_sensor_battery') | int %}

              {% if battery_level >= 95 %}
                green
              {% elif battery_level >= 80 %}
                green
              {% elif battery_level >= 60 %}
                yellow
              {% elif battery_level >= 40 %}
                yellow
              {% elif battery_level >= 20 %}
                red
              {% else %}
                red
              {% endif %}
            fill_container: true
            tap_action:
              action: more-info
            layout: vertical
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.dimmed
                name: Closet Dimmed
                tap_action:
                  action: call-service
                  service: script.dimmed
                  service_data:
                    target_lights: light.closet
                secondary_info: none
                layout: vertical
                icon: mdi:lightbulb-on-40
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Closet Bright
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.closet
                secondary_info: none
                layout: vertical
                icon: mdi:flash
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.closet
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.closet
                name: Closet
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
    icon: mdi:bed
  - title: Master Bath
    path: masterbath
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: binary_sensor.master_bath_ep1_occupancy
            icon: |
              {% if is_state('binary_sensor.master_bath_ep1_occupancy', 'on') %}
                mdi:account
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.master_bath_ep1_occupancy', 'on') %}
                lime
              {% else %}
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.master_bath_illuminance
            icon: |
              {% if states('sensor.master_bath_illuminance') | float > 0 %}
                mdi:white-balance-sunny
              {% else %}
                mdi:weather-sunny
              {% endif %}
            content: >
              {{ states('sensor.master_bath_illuminance') | float | round(0) }}lx
            icon_color: |
              {% if states('sensor.master_bath_illuminance') | float > 0 %}
                yellow
              {% else %}
                default
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.master_bath_temp
            icon: mdi:thermometer
            content: |
              {{ states('sensor.master_bath_temp') | float | round(0) }}°F
            icon_color: >
              {% set temp = states('sensor.master_bath_temp') | float %} 
              {% if temp <= 32 %}
                blue
              {% elif temp <= 68 %}
                cyan
              {% elif temp <= 77 %}
                green
              {% elif temp <= 86 %}
                yellow
              {% elif temp <= 95 %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.master_bath_temp_humidity_sensor_humidity
            icon: mdi:water-percent
            icon_color: >
              {% set humidity = states('sensor.master_bath_temp_humidity_sensor_humidity') | float %} 
              {% if humidity <= 50 %}
                green
              {% elif humidity <= 60 %}
                lime
              {% else %}
                red
              {% endif %}
            content: >
              {{ states('sensor.master_bath_temp_humidity_sensor_humidity') | float | round(0) }}%
            tap_action:
              action: more-info
          - type: template
            entity: sensor.master_bedroom_co2
            icon: mdi:molecule-co2
            icon_color: >-
              {% set co2 = states('sensor.master_bedroom_co2') | int(0) %} 
              {% if co2 <= 600 %} 
                green 
              {% elif co2 <= 1000 %} 
                yellow 
              {% elif co2 <= 1500 %} 
                orange 
              {% elif co2 <= 2000 %} 
                red 
              {% else %} 
                purple 
              {% endif %}
            content: |
              {{ states('sensor.master_bedroom_co2') | float | round(0) }}
            tap_action:
              action: more-info
        alignment: center
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            secondary: |-
              {% if is_state('binary_sensor.shower_in_use','on') %}
                In Use
              {% else %}
                Available
              {% endif %}
            icon: |-
              {% if is_state('binary_sensor.shower_in_use','on') %}
                mdi:shower-head
              {% else %}
                mdi:shower
              {% endif %}
            entity: binary_sensor.shower_in_use
            icon_color: |-
              {% if is_state('binary_sensor.shower_in_use','on') %}
                red
              {% else %}
                green
              {% endif %}
            badge_icon: ''
            layout: vertical
            tap_action:
              action: more-info
            primary: Shower
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: >-
              {% if is_state('binary_sensor.master_bath_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}

              {% else %}
                Leak Detected
              {% endif %}
            secondary: Under Sink
            icon: >-
              {% if is_state('binary_sensor.master_bath_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}
                mdi:water-outline
              {% else %}
                mdi:water-alert
              {% endif %}
            entity: binary_sensor.master_bath_water_leak_sensor_water_leak_detected
            badge_icon: ''
            tap_action:
              action: more-info
            color: >-
              {% if is_state('binary_sensor.master_bath_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}
                green
              {% else %}
                red
              {% endif %}
            vertical: true
            features_position: bottom
        visibility:
          - condition: state
            entity: binary_sensor.master_bath_water_leak_sensor_water_leak_detected
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Hall Door
            secondary: >-
              {% if is_state('binary_sensor.master_bath_hall_contact_sensor','off') %}
                Closed
              {% elif is_state('binary_sensor.master_bath_hall_contact_sensor','on') %}
                Open
              {% else %}
                Unavailable
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.master_bath_hall_contact_sensor','off') %}
                mdi:door-closed
              {% elif is_state('binary_sensor.master_bath_hall_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed-cancel
              {% endif %}
            entity: binary_sensor.master_bath_hall_contact_sensor
            icon_color: >-
              {% if is_state('binary_sensor.master_bath_hall_contact_sensor','off') %}
                green
              {% elif is_state('binary_sensor.master_bath_hall_contact_sensor','on') %}
                red
              {% else %}
                yellow
              {% endif %}
            badge_icon: >-
              {% set battery_level = states('sensor.master_bath_hall_contact_sensor_battery') | int %}

              {% if battery_level >= 95 %}
                mdi:battery
              {% elif battery_level >= 80 %}
                mdi:battery-90
              {% elif battery_level >= 60 %}
                mdi:battery-70
              {% elif battery_level >= 40 %}
                mdi:battery-50
              {% elif battery_level >= 20 %}
                mdi:battery-30
              {% else %}
                mdi:battery-alert
              {% endif %}
            badge_color: >-
              {% set battery_level = states('sensor.master_bath_hall_contact_sensor_battery') | int %}

              {% if battery_level >= 95 %}
                green
              {% elif battery_level >= 80 %}
                green
              {% elif battery_level >= 60 %}
                yellow
              {% elif battery_level >= 40 %}
                yellow
              {% elif battery_level >= 20 %}
                red
              {% else %}
                red
              {% endif %}
            fill_container: true
            tap_action:
              action: more-info
            layout: vertical
          - type: custom:mushroom-template-card
            primary: Bed Door
            secondary: >-
              {% if is_state('binary_sensor.master_bath_bed_contact_sensor','off') %}
                Closed
              {% elif is_state('binary_sensor.master_bath_bed_contact_sensor','on') %}
                Open
              {% else %}
                Unavailable
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.master_bath_bed_contact_sensor','off') %}
                mdi:door-closed
              {% elif is_state('binary_sensor.master_bath_bed_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed-cancel
              {% endif %}
            entity: binary_sensor.master_bath_bed_contact_sensor
            icon_color: >-
              {% if is_state('binary_sensor.master_bath_bed_contact_sensor','off') %}
                green
              {% elif is_state('binary_sensor.master_bath_bed_contact_sensor','on') %}
                red
              {% else %}
                yellow
              {% endif %}
            badge_icon: >-
              {% set battery_level = states('sensor.master_bath_bed_contact_sensor_battery') | int %}

              {% if battery_level >= 95 %}
                mdi:battery
              {% elif battery_level >= 80 %}
                mdi:battery-90
              {% elif battery_level >= 60 %}
                mdi:battery-70
              {% elif battery_level >= 40 %}
                mdi:battery-50
              {% elif battery_level >= 20 %}
                mdi:battery-30
              {% else %}
                mdi:battery-alert
              {% endif %}
            badge_color: >-
              {% set battery_level = states('sensor.master_bath_bed_contact_sensor_battery') | int %}

              {% if battery_level >= 95 %}
                green
              {% elif battery_level >= 80 %}
                green
              {% elif battery_level >= 60 %}
                yellow
              {% elif battery_level >= 40 %}
                yellow
              {% elif battery_level >= 20 %}
                red
              {% else %}
                red
              {% endif %}
            fill_container: true
            tap_action:
              action: more-info
            layout: vertical
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.white_relax
                name: Relax
                tap_action:
                  action: call-service
                  service: script.white_relax
                  service_data:
                    target_lights: light.zigbee_group_main_bath
                secondary_info: none
                layout: vertical
                icon: mdi:sofa-single
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Energize
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.zigbee_group_main_bath
                secondary_info: none
                layout: vertical
                icon: mdi:flash
              - type: custom:mushroom-entity-card
                entity: script.dimmed
                name: Dimmed
                tap_action:
                  action: call-service
                  service: script.dimmed
                  service_data:
                    target_lights: light.zigbee_group_main_bath
                secondary_info: none
                layout: vertical
                icon: mdi:lightbulb-on-40
              - type: custom:mushroom-entity-card
                entity: script.nightlight
                name: Nightlight
                tap_action:
                  action: call-service
                  service: script.nightlight
                  service_data:
                    target_lights: light.zigbee_group_main_bath
                secondary_info: none
                layout: vertical
                icon: mdi:weather-night
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_main_bath
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.mirror_1
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.mirror_2
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.mirror_3
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.main_bath_nightlight_light
                name: Nightlight
                fill_container: true
                use_light_color: true
                show_brightness_control: true
                show_color_control: true
    icon: mdi:bathtub
  - title: Library
    path: library
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: binary_sensor.library_ep1_occupancy
            icon: |
              {% if is_state('binary_sensor.library_ep1_occupancy', 'on') %}
                mdi:account
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.library_ep1_occupancy', 'on') %}
                lime
              {% else %}
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.library_ep1_illuminance
            icon: |
              {% if states('sensor.library_ep1_illuminance') | float > 0 %}
                mdi:white-balance-sunny
              {% else %}
                mdi:weather-sunny
              {% endif %}
            content: |
              {{ states('sensor.library_ep1_illuminance') | round(0) }}lx
            icon_color: |
              {% if states('sensor.library_ep1_illuminance') | float > 0 %}
                yellow
              {% else %}
                default
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.library_ep1_temperature
            icon: mdi:thermometer
            content: >
              {{ states('sensor.library_ep1_temperature') | float | round(0) }}°F
            icon_color: >
              {% set temp = states('sensor.library_ep1_temperature') | float %}
              {% if temp <= 32 %}
                blue
              {% elif temp <= 68 %}
                cyan
              {% elif temp <= 77 %}
                green
              {% elif temp <= 86 %}
                yellow
              {% elif temp <= 95 %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.library_ep1_humidity
            icon: mdi:water-percent
            icon_color: >
              {% set humidity = states('sensor.library_ep1_humidity') | float %}
              {% if humidity <= 50 %}
                green
              {% elif humidity <= 60 %}
                lime
              {% else %}
                red
              {% endif %}
            content: |
              {{ states('sensor.library_ep1_humidity') | float | round(0) }}%
            tap_action:
              action: more-info
          - type: template
            entity: sensor.library_ep1_co2
            icon: mdi:molecule-co2
            icon_color: >-
              {% set co2 = states('sensor.library_ep1_co2') | int(0) %} 
              {% if co2 <= 600 %} 
                green 
              {% elif co2 <= 1000 %} 
                yellow 
              {% elif co2 <= 1500 %} 
                orange 
              {% elif co2 <= 2000 %} 
                red 
              {% else %} 
                purple 
              {% endif %}
            content: |
              {{ states('sensor.library_ep1_co2') | float | round(0) }}
            tap_action:
              action: more-info
        alignment: center
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-fan-card
            entity: fan.office_fan
            name: Ceiling Fan
            icon_animation: false
            fill_container: false
            show_percentage_control: true
            tap_action:
              action: more-info
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Library Door
            secondary: >-
              {% if is_state('binary_sensor.library_door_contact_sensor','off') %}
                Closed
              {% elif is_state('binary_sensor.library_door_contact_sensor','on') %}
                Open
              {% else %}
                Unavailable
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.library_door_contact_sensor','off') %}
                mdi:door-closed
              {% elif is_state('binary_sensor.library_door_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed-cancel
              {% endif %}
            entity: binary_sensor.library_door_contact_sensor
            icon_color: >-
              {% if is_state('binary_sensor.library_door_contact_sensor','off') %}
                green
              {% elif is_state('binary_sensor.library_door_contact_sensor','on') %}
                red
              {% else %}
                yellow
              {% endif %}
            badge_icon: >-
              {% set battery_level = states('sensor.library_door_contact_sensor_battery') | int %}

              {% if battery_level >= 95 %}
                mdi:battery
              {% elif battery_level >= 80 %}
                mdi:battery-90
              {% elif battery_level >= 60 %}
                mdi:battery-70
              {% elif battery_level >= 40 %}
                mdi:battery-50
              {% elif battery_level >= 20 %}
                mdi:battery-30
              {% else %}
                mdi:battery-alert
              {% endif %}
            badge_color: >-
              {% set battery_level = states('sensor.library_door_contact_sensor_battery') | int %}

              {% if battery_level >= 95 %}
                green
              {% elif battery_level >= 80 %}
                green
              {% elif battery_level >= 60 %}
                yellow
              {% elif battery_level >= 40 %}
                yellow
              {% elif battery_level >= 20 %}
                red
              {% else %}
                red
              {% endif %}
            fill_container: true
            tap_action:
              action: more-info
            layout: vertical
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.white_relax
                name: Relax
                tap_action:
                  action: call-service
                  service: script.white_relax
                  service_data:
                    target_lights: light.zigbee_group_library
                layout: vertical
                secondary_info: none
                icon: mdi:sofa-single
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Energize
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.zigbee_group_library
                layout: vertical
                icon: mdi:flash
                secondary_info: none
              - type: custom:mushroom-entity-card
                entity: script.dimmed
                name: Dimmed
                tap_action:
                  action: call-service
                  service: script.dimmed
                  service_data:
                    target_lights: light.zigbee_group_library
                layout: vertical
                icon: mdi:lightbulb-on-40
                secondary_info: none
              - type: custom:mushroom-entity-card
                entity: script.nightlight
                name: Nightlight
                tap_action:
                  action: call-service
                  service: script.nightlight
                  service_data:
                    target_lights: light.zigbee_group_library
                layout: vertical
                icon: mdi:weather-night
                secondary_info: none
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_library
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.library_desk
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
                name: Desk
              - type: custom:mushroom-light-card
                entity: light.library_window
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
                name: Window
              - type: custom:mushroom-light-card
                entity: light.bookshelf
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
                name: Bookshelf
    icon: mdi:bookshelf
  - title: Meditation
    path: meditation
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: binary_sensor.meditation_ep1_occupancy
            icon: |
              {% if is_state('binary_sensor.meditation_ep1_occupancy', 'on') %}
                mdi:account
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.meditation_ep1_occupancy', 'on') %}
                lime
              {% else %}
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.meditation_ep1_illuminance
            icon: |
              {% if states('sensor.meditation_ep1_illuminance') | float > 0 %}
                mdi:white-balance-sunny
              {% else %}
                mdi:weather-sunny
              {% endif %}
            content: >
              {{ states('sensor.meditation_ep1_illuminance') | float | round(0) }}lx
            icon_color: |
              {% if states('sensor.meditation_ep1_illuminance') | float > 0 %}
                yellow
              {% else %}
                default
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.meditation_ep1_temperature
            icon: mdi:thermometer
            content: >
              {{ states('sensor.meditation_ep1_temperature') | float | round(0) }}°F
            icon_color: >
              {% set temp = states('sensor.meditation_ep1_temperature') | float %} 
              {% if temp <= 32 %}
                blue
              {% elif temp <= 68 %}
                cyan
              {% elif temp <= 77 %}
                green
              {% elif temp <= 86 %}
                yellow
              {% elif temp <= 95 %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.meditation_ep1_humidity
            icon: mdi:water-percent
            icon_color: >
              {% set humidity = states('sensor.meditation_ep1_humidity') | float %} 
              {% if humidity <= 50 %}
                green
              {% elif humidity <= 60 %}
                lime
              {% else %}
                red
              {% endif %}
            content: |
              {{ states('sensor.meditation_ep1_humidity') | float | round(0) }}%
            tap_action:
              action: more-info
          - type: template
            entity: sensor.meditation_co2
            icon: mdi:molecule-co2
            icon_color: >-
              {% set co2 = states('sensor.meditation_co2') | int(0) %} 
              {% if co2 <= 600 %} 
                green 
              {% elif co2 <= 1000 %} 
                yellow 
              {% elif co2 <= 1500 %} 
                orange 
              {% elif co2 <= 2000 %} 
                red 
              {% else %} 
                purple 
              {% endif %}
            content: |
              {{ states('sensor.meditation_co2') | float | round(0) }}
            tap_action:
              action: more-info
        alignment: center
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: [me]
            secondary: |-
              {% if is_state('input_boolean.is_meditating','on') %}
                Meditating
              {% else %}
                Not Meditating
              {% endif %}
            icon: |-
              {% if is_state('input_boolean.is_meditating','on') %}
                mdi:meditation
              {% else %}
                mdi:emoticon-neutral-outline
              {% endif %}
            entity: input_boolean.is_meditating
            icon_color: |-
              {% if is_state('input_boolean.is_meditating','on') %}
                green
              {% else %}
                default
              {% endif %}
            layout: vertical
            fill_container: false
            tap_action:
              action: more-info
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.meditation
                name: Meditation
                tap_action:
                  action: perform-action
                  perform_action: script.meditation
                  target: {}
                secondary_info: none
                layout: vertical
                icon: mdi:meditation
              - type: custom:mushroom-entity-card
                entity: script.white_relax
                name: Relax
                tap_action:
                  action: call-service
                  service: script.white_relax
                  service_data:
                    target_lights: light.zigbee_group_meditation
                layout: vertical
                secondary_info: none
                icon: mdi:sofa-single
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Energize
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.zigbee_group_meditation
                layout: vertical
                icon: mdi:flash
                secondary_info: none
              - type: custom:mushroom-entity-card
                entity: script.dimmed
                name: Dimmed
                tap_action:
                  action: call-service
                  service: script.dimmed
                  service_data:
                    target_lights: light.zigbee_group_meditation
                layout: vertical
                icon: mdi:lightbulb-on-40
                secondary_info: none
              - type: custom:mushroom-entity-card
                entity: script.nightlight
                name: Nightlight
                tap_action:
                  action: call-service
                  service: script.nightlight
                  service_data:
                    target_lights: light.zigbee_group_meditation
                layout: vertical
                icon: mdi:weather-night
                secondary_info: none
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_meditation
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.cabinet
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.floor_lamp_2
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.ceiling1
                name: Ceiling 1
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.ceiling2
                name: Ceiling 2
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Meditation Door
            secondary: >-
              {% if is_state('binary_sensor.meditation_room_contact_sensor','off') %}
                Closed
              {% else %}
                Open
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.meditation_room_contact_sensor','off') %}
                mdi:door-closed
              {% else %}
                mdi:door-open
              {% endif %}
            entity: binary_sensor.meditation_room_contact_sensor
            icon_color: >-
              {% if is_state('binary_sensor.meditation_room_contact_sensor','off') %}
                green
              {% else %}
                red
              {% endif %}
            badge_icon: >-
              {% set battery_level = states('sensor.meditation_room_contact_sensor_battery') | int %}
              {% if battery_level >= 95 %}
                mdi:battery
              {% elif battery_level >= 80 %}
                mdi:battery-90
              {% elif battery_level >= 60 %}
                mdi:battery-70
              {% elif battery_level >= 40 %}
                mdi:battery-50
              {% elif battery_level >= 20 %}
                mdi:battery-30
              {% else %}
                mdi:battery-alert
              {% endif %}
            badge_color: >-
              {% set battery_level = states('sensor.meditation_room_contact_sensor_battery') | int %}
              {% if battery_level >= 95 %}
                green
              {% elif battery_level >= 80 %}
                green
              {% elif battery_level >= 60 %}
                yellow
              {% elif battery_level >= 40 %}
                yellow
              {% elif battery_level >= 20 %}
                red
              {% else %}
                red
              {% endif %}
            fill_container: true
            tap_action:
              action: more-info
            layout: vertical
    icon: mdi:meditation
  - title: Dining Room
    path: diningroom
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: binary_sensor.ecobee_thermostat_motion
            icon: |
              {% if is_state('binary_sensor.ecobee_thermostat_motion', 'on') %}
                mdi:account
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.ecobee_thermostat_motion', 'on') %}
                lime
              {% else %}
                
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.kitchen_ep1_illuminance
            icon: |
              {% if states('sensor.kitchen_ep1_illuminance') | float > 0 %}
                mdi:white-balance-sunny
              {% else %}
                mdi:weather-sunny
              {% endif %}
            content: >
              {{ states('sensor.kitchen_ep1_illuminance') | float | round(0) }}lx
            icon_color: |
              {% if states('sensor.kitchen_ep1_illuminance') | float > 0 %}
                yellow
              {% else %}
                default
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.ecobee_thermostat_current_temperature
            icon: mdi:thermometer
            content: >
              {{ states('sensor.ecobee_thermostat_current_temperature') | float | round(0) }}°F
            icon_color: >
              {% set temp = states('sensor.ecobee_thermostat_current_temperature') | float %}
              {% if temp <= 32 %}
                blue
              {% elif temp <= 68 %}
                cyan
              {% elif temp <= 77 %}
                green
              {% elif temp <= 86 %}
                yellow
              {% elif temp <= 95 %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.ecobee_thermostat_current_humidity
            icon: mdi:water-percent
            icon_color: >
              {% set humidity = states('sensor.ecobee_thermostat_current_humidity') | float %} 
              {% if humidity <= 50 %}
                green
              {% elif humidity <= 60 %}
                lime
              {% else %}
                red
              {% endif %}
            content: >
              {{ states('sensor.ecobee_thermostat_current_humidity') | float | round(0) }}%
            tap_action:
              action: more-info
          - type: template
            entity: sensor.kitchen_co2
            icon: mdi:molecule-co2
            icon_color: >-
              {% set co2 = states('sensor.kitchen_co2') | int(0) %} 
              {% if co2 <= 600 %} 
                green 
              {% elif co2 <= 1000 %} 
                yellow 
              {% elif co2 <= 1500 %}
                orange 
              {% elif co2 <= 2000 %} 
                red 
              {% else %} 
                purple 
              {% endif %}
            content: |
              {{ states('sensor.kitchen_co2') | float | round(0) }}
            tap_action:
              action: more-info
        alignment: center
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.white_relax
                name: Relax
                tap_action:
                  action: call-service
                  service: script.white_relax
                  service_data:
                    target_lights: light.zigbee_group_dining_room
                secondary_info: none
                layout: vertical
                icon: mdi:sofa-single
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Energize
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.zigbee_group_dining_room
                secondary_info: none
                layout: vertical
                icon: mdi:flash
              - type: custom:mushroom-entity-card
                entity: script.dimmed
                name: Dimmed
                tap_action:
                  action: call-service
                  service: script.dimmed
                  service_data:
                    target_lights: light.zigbee_group_dining_room
                secondary_info: none
                layout: vertical
                icon: mdi:lightbulb-on-40
              - type: custom:mushroom-entity-card
                entity: script.nightlight
                name: Nightlight
                tap_action:
                  action: call-service
                  service: script.nightlight
                  service_data:
                    target_lights: light.zigbee_group_dining_room
                secondary_info: none
                layout: vertical
                icon: mdi:weather-night
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_dining_room
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.table_1
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.table_2
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.table_3
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
                name: Table 3
              - type: custom:mushroom-light-card
                entity: light.table_4
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.table_5
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.table_6
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
    icon: mdi:table-chair
  - title: Front Porch
    path: frontporch
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: binary_sensor.doorbell_person
            icon: |
              {% if is_state('binary_sensor.doorbell_person', 'on') %}
                mdi:account
              {% else %}
                mdi:account-outline
              {% endif %}
            content: ''
            tap_action:
              action: more-info
            icon_color: |-
              {% if is_state('binary_sensor.doorbell_person', 'on') %}
                lime
              {% else %}

              {% endif %}
          - type: template
            entity: sensor.ws2902_weather_solar_rad_lx
            icon: |
              {% if states('sensor.ws2902_weather_solar_rad_lx') | float > 0 %}
                mdi:white-balance-sunny
              {% else %}
                mdi:weather-sunny
              {% endif %}
            content: >
              {{ states('sensor.ws2902_weather_solar_rad_lx') | float | round(0) }}lx
            icon_color: |
              {% if states('sensor.ws2902_weather_solar_rad_lx') | float > 0 %}
                yellow
              {% else %}
                default
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            tap_action:
              action: more-info
            entity: sensor.o_1pst_temperature
            content: "{{ states('sensor.o_1pst_temperature') | float | round(0) }}°F"
            icon: mdi:thermometer
            icon_color: |-
              {% set temp = states('sensor.o_1pst_temperature') | float %} 
              {% if temp <= 32 %}
                blue
              {% elif temp <= 68 %}
                cyan
              {% elif temp <= 77 %}
                green
              {% elif temp <= 86 %}
                yellow
              {% elif temp <= 95 %}
                orange
              {% else %}
                red
              {% endif %}
          - type: template
            tap_action:
              action: more-info
            entity: sensor.o_1pst_humidity
            icon: mdi:water-percent
            icon_color: |-
              {% set humidity = states('sensor.o_1pst_humidity') | float %} 
              {% if humidity <= 50 %}
                green
              {% elif humidity <= 60 %}
                lime
              {% else %}
                red
              {% endif %}
            content: "{{ states('sensor.o_1pst_humidity') | float | round(0) }}%"
          - type: template
            entity: sensor.o_1pst_carbon_dioxide
            icon: mdi:molecule-co2
            icon_color: >-
              {% set co2 = states('sensor.o_1pst_carbon_dioxide') | int(0) %} 
              {% if co2 <= 600 %} 
                green 
              {% elif co2 <= 1000 %} 
                yellow 
              {% elif co2 <= 1500 %} 
                orange 
              {% elif co2 <= 2000 %} 
                red 
              {% else %} 
                purple 
              {% endif %}
            content: |
              {{ states('sensor.o_1pst_carbon_dioxide') | float | round(0) }}
            tap_action:
              action: more-info
        alignment: center
      - type: horizontal-stack
        cards:
          - camera_view: live
            fit_mode: contain
            type: picture-glance
            image: https://demo.home-assistant.io/stub_config/kitchen.png
            entities: []
            camera_image: camera.side_door_fluent
            tap_action:
              action: url
              url_path: app://com.mcu.reolink
            hold_action:
              action: more-info
          - type: picture-glance
            camera_view: live
            image: https://demo.home-assistant.io/stub_config/kitchen.png
            entities: []
            camera_image: camera.doorbell_fluent
            tap_action:
              action: url
              url_path: app://com.mcu.reolink
            hold_action:
              action: more-info
      - type: horizontal-stack
        cards:
          - camera_view: live
            fit_mode: contain
            type: picture-glance
            image: https://demo.home-assistant.io/stub_config/kitchen.png
            entities: []
            camera_image: camera.porch_fluent
            tap_action:
              action: url
              url_path: app://com.mcu.reolink
            hold_action:
              action: more-info
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-lock-card
            entity: lock.front_door_lock
            name: Front Door
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            primary_info: name
            secondary_info: last-changed
          - type: custom:mushroom-template-card
            primary: Front Door
            secondary: |-
              {% if is_state('binary_sensor.front_door_contact_sensor','off') %}
                Closed
              {% else %}
                Open
              {% endif %}
            icon: |-
              {% if is_state('binary_sensor.front_door_contact_sensor','off') %}
                mdi:door-closed
              {% else %}
                mdi:door-open
              {% endif %}
            entity: binary_sensor.front_door_contact_sensor
            badge_icon: >-
              {% set battery_level = states('sensor.front_door_contact_sensor_battery') | int %} 
              {% if battery_level >= 95 %}
                mdi:battery
              {% elif battery_level >= 80 %}
                mdi:battery-90
              {% elif battery_level >= 60 %}
                mdi:battery-70
              {% elif battery_level >= 40 %}
                mdi:battery-50
              {% elif battery_level >= 20 %}
                mdi:battery-30
              {% else %}
                mdi:battery-alert
              {% endif %}
            badge_color: >-
              {% set battery_level = states('sensor.front_door_contact_sensor_battery') | int %} 
              {% if battery_level >= 95 %}
                green
              {% elif battery_level >= 80 %}
                green
              {% elif battery_level >= 60 %}
                yellow
              {% elif battery_level >= 40 %}
                yellow
              {% elif battery_level >= 20 %}
                red
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
            color: |-
              {% if is_state('binary_sensor.front_door_contact_sensor','off') %}
                green
              {% else %}
                red
              {% endif %}
            vertical: true
            features_position: bottom
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.white_relax
                name: Relax
                tap_action:
                  action: call-service
                  service: script.white_relax
                  service_data:
                    target_lights: light.zigbee_group_front_porch
                secondary_info: none
                layout: vertical
                icon: mdi:sofa
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Bright
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.zigbee_group_front_porch
                secondary_info: none
                layout: vertical
                icon: mdi:flash
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_front_porch
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.door_light
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.door_light_2
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.side_door
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.side_door_2
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.porch_6
                name: Porch
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
    icon: mdi:doorbell-video
  - title: Garage
    path: garage
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: binary_sensor.garage_ep1_occupancy
            icon: |
              {% if is_state('binary_sensor.garage_ep1_occupancy', 'on') %}
                mdi:account
              {% else %}
                mdi:account-outline
              {% endif %}
            content: ''
            tap_action:
              action: more-info
            icon_color: |
              {% if is_state('binary_sensor.garage_ep1_occupancy', 'on') %}
                lime
              {% else %}
                
              {% endif %}
          - type: template
            entity: sensor.garage_ep1_illuminance
            icon: >
              {% if states('sensor.garage_ep1_illuminance') | float | round(0) > 0 %}
                mdi:white-balance-sunny
              {% else %}
                mdi:weather-sunny
              {% endif %}
            content: |
              {{ states('sensor.garage_ep1_illuminance') | float | round(0) }}lx
            icon_color: >
              {% if states('sensor.garage_ep1_illuminance') | float | round(0) > 0 %}
                yellow
              {% else %}
                default
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.garage_ep1_temperature
            icon: mdi:thermometer
            content: |
              {{ states('sensor.garage_ep1_temperature') | float | round(0) }}°F
            icon_color: >
              {% set temp = states('sensor.garage_ep1_temperature') | float %}
              {% if temp <= 32 %}
                blue
              {% elif temp <= 68 %}
                cyan
              {% elif temp <= 77 %}
                green
              {% elif temp <= 86 %}
                yellow
              {% elif temp <= 95 %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.garage_ep1_humidity
            icon: mdi:water-percent
            icon_color: >
              {% set humidity = states('sensor.garage_ep1_humidity') | float %}
              {% if humidity <= 50 %}
                green
              {% elif humidity <= 60 %}
                lime
              {% else %}
                red
              {% endif %}
            content: |
              {{ states('sensor.garage_ep1_humidity') | float | round(0) }}%
            tap_action:
              action: more-info
          - type: template
            entity: sensor.garage_co2
            icon: mdi:molecule-co2
            icon_color: >-
              {% set co2 = states('sensor.garage_co2') | int(0) %} 
              {% if co2 <= 600 %} 
                green 
              {% elif co2 <= 1000 %} 
                yellow 
              {% elif co2 <= 1500 %}
                orange 
              {% elif co2 <= 2000 %} 
                red 
              {% else %} 
                purple 
              {% endif %}
            content: |
              {{ states('sensor.garage_co2') | float | round(0) }}
            tap_action:
              action: more-info
        alignment: center
      - camera_view: live
        type: picture-glance
        image: 
        entities: []
        camera_image: camera.driveway_fluent
        hold_action:
          action: url
          url_path: app://com.mcu.reolink
        tap_action:
          action: more-info
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-lock-card
            entity: lock.back_door_lock
            name: Back Door
            primary_info: name
            secondary_info: last-changed
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            fill_container: true
          - type: custom:mushroom-lock-card
            entity: lock.garage_handle_lock
            name: Garage Handle
            fill_container: true
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-cover-card
            entity: cover.side_garage_door
            name: Side Garage
            fill_container: true
            show_tilt_position_control: false
            show_buttons_control: true
            tap_action:
              action: more-info
          - type: custom:mushroom-cover-card
            entity: cover.main_garage_door
            name: Main Garage
            fill_container: true
            show_tilt_position_control: false
            show_buttons_control: true
            tap_action:
              action: more-info
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: >-
              {% if is_state('binary_sensor.side_garage_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}

              {% else %}
                Leak Detected
              {% endif %}
            secondary: Side Garage
            icon: >-
              {% if is_state('binary_sensor.side_garage_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}
                mdi:water-outline
              {% else %}
                mdi:water-alert
              {% endif %}
            entity: binary_sensor.side_garage_water_leak_sensor_water_leak_detected
            badge_icon: ''
            tap_action:
              action: more-info
            color: >-
              {% if is_state('binary_sensor.side_garage_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}
                green
              {% else %}
                red
              {% endif %}
            vertical: true
            features_position: bottom
          - type: custom:mushroom-template-card
            primary: >-
              {% if is_state('binary_sensor.main_garage_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}

              {% else %}
                Leak Detected
              {% endif %}
            secondary: Main Garage
            icon: >-
              {% if is_state('binary_sensor.main_garage_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}
                mdi:water-outline
              {% else %}
                mdi:water-alert
              {% endif %}
            entity: binary_sensor.main_garage_water_leak_sensor_water_leak_detected
            icon_color: >-
              {% if is_state('binary_sensor.main_garage_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}
                green
              {% else %}
                red
              {% endif %}
            badge_icon: ''
            layout: vertical
            tap_action:
              action: more-info
        visibility:
          - condition: or
            conditions:
              - condition: state
                entity: >-
                  binary_sensor.side_garage_water_leak_sensor_water_leak_detected
                state: 'on'
              - condition: state
                entity: >-
                  binary_sensor.main_garage_water_leak_sensor_water_leak_detected
                state: 'on'
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.white_relax
                name: Relax
                tap_action:
                  action: call-service
                  service: script.white_relax
                  service_data:
                    target_lights: light.zigbee_group_garage
                secondary_info: none
                layout: vertical
                icon: mdi:sofa-single
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Energize
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.zigbee_group_garage
                secondary_info: none
                layout: vertical
                icon: mdi:flash
              - type: custom:mushroom-entity-card
                entity: script.garage_door_open
                name: Door Open
                tap_action:
                  action: perform-action
                  perform_action: script.garage_door_open
                  target: {}
                secondary_info: none
                layout: vertical
                icon: mdi:door-open
              - type: custom:mushroom-entity-card
                entity: script.garage_wall_night
                name: Patio
                tap_action:
                  action: perform-action
                  perform_action: script.garage_wall_night
                  target: {}
                secondary_info: none
                layout: vertical
                icon: mdi:outdoor-lamp
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_garage
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.driveway_flood_light
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
                name: Floodlight
              - type: custom:mushroom-light-card
                entity: light.garage_wall
                name: Patio
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.backsteps_light
                name: Steps
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.garage_ceiling_1
                name: Ceiling 1
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.garage_ceiling_2
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
                name: Ceiling 2
              - type: custom:mushroom-light-card
                entity: light.garage_ceiling_3
                name: Ceiling 3
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.garage_ceiling_4
                name: Ceiling 4
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.driveway_floodlight
                name: Cam Light
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:door-closed
          primary: Doors
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-template-card
                primary: Back Door
                secondary: >-
                  {% if is_state('binary_sensor.back_door_contact_sensor','off') %}
                    Closed
                  {% elif is_state('binary_sensor.back_door_contact_sensor','on') %}
                    Open
                  {% else %}
                    Unavailable
                  {% endif %}
                icon: >-
                  {% if is_state('binary_sensor.back_door_contact_sensor','off') %}
                    mdi:door-closed
                  {% elif is_state('binary_sensor.back_door_contact_sensor','on') %}
                    mdi:door-open
                  {% else %}
                    mdi:door-closed-cancel
                  {% endif %}
                entity: binary_sensor.back_door_contact_sensor
                icon_color: >-
                  {% if is_state('binary_sensor.back_door_contact_sensor','off') %}
                    green
                  {% elif is_state('binary_sensor.back_door_contact_sensor','on') %}
                    red
                  {% else %}
                    yellow
                  {% endif %}
                badge_icon: >-
                  {% set battery_level = states('sensor.back_door_contact_sensor_battery') | int %}

                  {% if battery_level >= 95 %}
                    mdi:battery
                  {% elif battery_level >= 80 %}
                    mdi:battery-90
                  {% elif battery_level >= 60 %}
                    mdi:battery-70
                  {% elif battery_level >= 40 %}
                    mdi:battery-50
                  {% elif battery_level >= 20 %}
                    mdi:battery-30
                  {% else %}
                    mdi:battery-alert
                  {% endif %}
                badge_color: >-
                  {% set battery_level = states('sensor.back_door_contact_sensor_battery') | int %}

                  {% if battery_level >= 95 %}
                    green
                  {% elif battery_level >= 80 %}
                    green
                  {% elif battery_level >= 60 %}
                    yellow
                  {% elif battery_level >= 40 %}
                    yellow
                  {% elif battery_level >= 20 %}
                    red
                  {% else %}
                    red
                  {% endif %}
                fill_container: true
                tap_action:
                  action: more-info
                layout: vertical
              - type: custom:mushroom-template-card
                primary: Garage
                secondary: >-
                  {% if is_state('binary_sensor.garage_door_contact_sensor','off') %}
                    Closed
                  {% elif is_state('binary_sensor.garage_door_contact_sensor','on') %}
                    Open
                  {% else %}
                    Unavailable
                  {% endif %}
                icon: >-
                  {% if is_state('binary_sensor.garage_door_contact_sensor','off') %}
                    mdi:door-closed
                  {% elif is_state('binary_sensor.garage_door_contact_sensor','on') %}
                    mdi:door-open
                  {% else %}
                    mdi:door-closed-cancel
                  {% endif %}
                entity: binary_sensor.garage_door_contact_sensor
                icon_color: >-
                  {% if is_state('binary_sensor.garage_door_contact_sensor','off') %}
                    green
                  {% elif is_state('binary_sensor.garage_door_contact_sensor','on') %}
                    red
                  {% else %}
                    yellow
                  {% endif %}
                badge_icon: >-
                  {% set battery_level = states('sensor.garage_door_contact_sensor_battery') | int %}

                  {% if battery_level >= 95 %}
                    mdi:battery
                  {% elif battery_level >= 80 %}
                    mdi:battery-90
                  {% elif battery_level >= 60 %}
                    mdi:battery-70
                  {% elif battery_level >= 40 %}
                    mdi:battery-50
                  {% elif battery_level >= 20 %}
                    mdi:battery-30
                  {% else %}
                    mdi:battery-alert
                  {% endif %}
                badge_color: >-
                  {% set battery_level = states('sensor.garage_door_contact_sensor_battery') | int %}

                  {% if battery_level >= 95 %}
                    green
                  {% elif battery_level >= 80 %}
                    green
                  {% elif battery_level >= 60 %}
                    yellow
                  {% elif battery_level >= 40 %}
                    yellow
                  {% elif battery_level >= 20 %}
                    red
                  {% else %}
                    red
                  {% endif %}
                fill_container: true
                tap_action:
                  action: more-info
                layout: vertical
              - type: custom:mushroom-template-card
                primary: Main Side
                secondary: >-
                  {% if is_state('binary_sensor.main_garage_side_door_contact_sensor','off') %}
                    Closed
                  {% elif is_state('binary_sensor.main_garage_side_door_contact_sensor','on') %}
                    Open
                  {% else %}
                    Unavailable
                  {% endif %}
                icon: >-
                  {% if is_state('binary_sensor.main_garage_side_door_contact_sensor','off') %}
                    mdi:door-closed
                  {% elif is_state('binary_sensor.main_garage_side_door_contact_sensor','on') %}
                    mdi:door-open
                  {% else %}
                    mdi:door-closed-cancel
                  {% endif %}
                entity: binary_sensor.main_garage_side_door_contact_sensor
                icon_color: >-
                  {% if is_state('binary_sensor.main_garage_side_door_contact_sensor','off') %}
                    green
                  {% elif is_state('binary_sensor.main_garage_side_door_contact_sensor','on') %}
                    red
                  {% else %}
                    yellow
                  {% endif %}
                badge_icon: >-
                  {% set battery_level = states('sensor.main_garage_side_door_contact_sensor_battery') | int %}

                  {% if battery_level >= 95 %}
                    mdi:battery
                  {% elif battery_level >= 80 %}
                    mdi:battery-90
                  {% elif battery_level >= 60 %}
                    mdi:battery-70
                  {% elif battery_level >= 40 %}
                    mdi:battery-50
                  {% elif battery_level >= 20 %}
                    mdi:battery-30
                  {% else %}
                    mdi:battery-alert
                  {% endif %}
                badge_color: >-
                  {% set battery_level = states('sensor.main_garage_side_door_contact_sensor_battery') | int %}

                  {% if battery_level >= 95 %}
                    green
                  {% elif battery_level >= 80 %}
                    green
                  {% elif battery_level >= 60 %}
                    yellow
                  {% elif battery_level >= 40 %}
                    yellow
                  {% elif battery_level >= 20 %}
                    red
                  {% else %}
                    red
                  {% endif %}
                fill_container: true
                tap_action:
                  action: more-info
                layout: vertical
              - type: custom:mushroom-template-card
                primary: Side Garage
                secondary: >-
                  {% if is_state('binary_sensor.side_garage_side_door_contact_sensor','off') %}
                    Closed
                  {% elif is_state('binary_sensor.side_garage_side_door_contact_sensor','on') %}
                    Open
                  {% else %}
                    Unavailable
                  {% endif %}
                icon: >-
                  {% if is_state('binary_sensor.side_garage_side_door_contact_sensor','off') %}
                    mdi:door-closed
                  {% elif is_state('binary_sensor.side_garage_side_door_contact_sensor','on') %}
                    mdi:door-open
                  {% else %}
                    mdi:door-closed-cancel
                  {% endif %}
                entity: binary_sensor.side_garage_side_door_contact_sensor
                icon_color: >-
                  {% if is_state('binary_sensor.side_garage_side_door_contact_sensor','off') %}
                    green
                  {% elif is_state('binary_sensor.side_garage_side_door_contact_sensor','on') %}
                    red
                  {% else %}
                    yellow
                  {% endif %}
                badge_icon: >-
                  {% set battery_level = states('sensor.side_garage_side_door_contact_sensor_battery') | int %}

                  {% if battery_level >= 95 %}
                    mdi:battery
                  {% elif battery_level >= 80 %}
                    mdi:battery-90
                  {% elif battery_level >= 60 %}
                    mdi:battery-70
                  {% elif battery_level >= 40 %}
                    mdi:battery-50
                  {% elif battery_level >= 20 %}
                    mdi:battery-30
                  {% else %}
                    mdi:battery-alert
                  {% endif %}
                badge_color: >-
                  {% set battery_level = states('sensor.side_garage_side_door_contact_sensor_battery') | int %}

                  {% if battery_level >= 95 %}
                    green
                  {% elif battery_level >= 80 %}
                    green
                  {% elif battery_level >= 60 %}
                    yellow
                  {% elif battery_level >= 40 %}
                    yellow
                  {% elif battery_level >= 20 %}
                    red
                  {% else %}
                    red
                  {% endif %}
                fill_container: true
                tap_action:
                  action: more-info
                layout: vertical
    icon: mdi:garage
  - title: Bathroom
    path: bathroom
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: binary_sensor.bathroom_ep1_occupancy
            icon: |
              {% if is_state('binary_sensor.bathroom_ep1_occupancy', 'on') %}
                mdi:account
              {% else %}
                mdi:account-outline
              {% endif %}
            content: ''
            tap_action:
              action: more-info
            icon_color: |
              {% if is_state('binary_sensor.bathroom_ep1_occupancy', 'on') %}
                lime
              {% else %}
                
              {% endif %}
          - type: template
            entity: sensor.bathroom_motion_sensor_illuminance
            icon: >
              {% if states('sensor.bathroom_motion_sensor_illuminance') | float > 0 %}
                mdi:white-balance-sunny
              {% else %}
                mdi:weather-sunny
              {% endif %}
            content: >
              {{ states('sensor.bathroom_motion_sensor_illuminance') | float | round(0) }}lx
            icon_color: >
              {% if states('sensor.bathroom_motion_sensor_illuminance') | float > 0 %}
                yellow
              {% else %}
                default
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.bathroom_motion_sensor_temperature
            icon: mdi:thermometer
            content: >
              {{ states('sensor.bathroom_motion_sensor_temperature') | float | round(0) }}°F
            icon_color: >
              {% set temp = states('sensor.bathroom_motion_sensor_temperature') | float %} 
              {% if temp <= 32 %}
                blue
              {% elif temp <= 68 %}
                cyan
              {% elif temp <= 77 %}
                green
              {% elif temp <= 86 %}
                yellow
              {% elif temp <= 95 %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
        alignment: center
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: >-
              {% if is_state('binary_sensor.bathroom_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}

              {% else %}
                Leak Detected
              {% endif %}
            secondary: Bathroom Sink
            icon: >-
              {% if is_state('binary_sensor.bathroom_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}
                mdi:water-outline
              {% else %}
                mdi:water-alert
              {% endif %}
            entity: binary_sensor.bathroom_water_leak_sensor_water_leak_detected
            badge_icon: ''
            tap_action:
              action: more-info
            color: >-
              {% if is_state('binary_sensor.bathroom_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}
                green
              {% else %}
                red
              {% endif %}
            vertical: true
            features_position: bottom
        visibility:
          - condition: state
            entity: binary_sensor.bathroom_water_leak_sensor_water_leak_detected
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Bathroom Door
            secondary: |-
              {% if is_state('binary_sensor.bathroom_contact_sensor','off') %}
                Closed
              {% elif is_state('binary_sensor.bathroom_contact_sensor','on') %}
                Open
              {% else %}
                Unavailable
              {% endif %}
            icon: |-
              {% if is_state('binary_sensor.bathroom_contact_sensor','off') %}
                mdi:door-closed
              {% elif is_state('binary_sensor.bathroom_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed-cancel
              {% endif %}
            entity: binary_sensor.bathroom_contact_sensor
            icon_color: |-
              {% if is_state('binary_sensor.bathroom_contact_sensor','off') %}
                green
              {% elif is_state('binary_sensor.bathroom_contact_sensor','on') %}
                red
              {% else %}
                yellow
              {% endif %}
            badge_icon: >-
              {% set battery_level = states('sensor.bathroom_contact_sensor_battery') | int %}

              {% if battery_level >= 95 %}
                mdi:battery
              {% elif battery_level >= 80 %}
                mdi:battery-90
              {% elif battery_level >= 60 %}
                mdi:battery-70
              {% elif battery_level >= 40 %}
                mdi:battery-50
              {% elif battery_level >= 20 %}
                mdi:battery-30
              {% else %}
                mdi:battery-alert
              {% endif %}
            badge_color: >-
              {% set battery_level = states('sensor.bathroom_contact_sensor_battery') | int %}

              {% if battery_level >= 95 %}
                green
              {% elif battery_level >= 80 %}
                green
              {% elif battery_level >= 60 %}
                yellow
              {% elif battery_level >= 40 %}
                yellow
              {% elif battery_level >= 20 %}
                red
              {% else %}
                red
              {% endif %}
            fill_container: true
            tap_action:
              action: more-info
            layout: vertical
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Energize
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.zigbee_group_bathroom
                secondary_info: none
                layout: vertical
                icon: mdi:flash
              - type: custom:mushroom-entity-card
                entity: script.white_relax
                name: Relax
                tap_action:
                  action: call-service
                  service: script.white_relax
                  service_data:
                    target_lights: light.zigbee_group_bathroom
                secondary_info: none
                layout: vertical
                icon: mdi:lightbulb-on-90
              - type: custom:mushroom-entity-card
                entity: script.nightlight
                name: Nightlight
                tap_action:
                  action: call-service
                  service: script.nightlight
                  service_data:
                    target_lights: light.zigbee_group_bathroom
                secondary_info: none
                layout: vertical
                icon: mdi:weather-night
              - type: custom:mushroom-entity-card
                entity: script.dimmed
                name: Dimmed
                tap_action:
                  action: call-service
                  service: script.dimmed
                  service_data:
                    target_lights: light.zigbee_group_bathroom
                secondary_info: none
                layout: vertical
                icon: mdi:lightbulb-on-40
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_bathroom
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.bathroom_1
                name: Mirror 1
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.bathroom_2
                name: Mirror 2
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.bathroom_3
                name: Mirror 3
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
    icon: mdi:toilet
  - title: Drone Room
    path: droneroom
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: binary_sensor.drone_room_motion_sensor_motion
            icon: >
              {% if is_state('binary_sensor.drone_room_motion_sensor_motion', 'on') %}
                mdi:account
              {% else %}
                mdi:account-outline
              {% endif %}
            content: ''
            tap_action:
              action: more-info
            icon_color: >
              {% if is_state('binary_sensor.drone_room_motion_sensor_motion', 'on') %}
                lime
              {% else %}
                
              {% endif %}
          - type: template
            entity: sensor.drone_room_motion_sensor_illuminance
            icon: >
              {% if states('sensor.drone_room_motion_sensor_illuminance') | float > 0 %}
                mdi:white-balance-sunny
              {% else %}
                mdi:weather-sunny
              {% endif %}
            content: |
              {{ states('sensor.drone_room_motion_sensor_illuminance') }}lx
            icon_color: >
              {% if states('sensor.drone_room_motion_sensor_illuminance') | float > 0 %}
                yellow
              {% else %}
                default
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.drone_room_motion_sensor_temperature
            icon: mdi:thermometer
            content: >
              {{ states('sensor.drone_room_motion_sensor_temperature') | float | round(0) }}°F
            icon_color: >
              {% set temp = states('sensor.drone_room_motion_sensor_temperature') | float %}
              {% if temp <= 32 %}
                blue
              {% elif temp <= 68 %}
                cyan
              {% elif temp <= 77 %}
                green
              {% elif temp <= 86 %}
                yellow
              {% elif temp <= 95 %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.drone_room_motion_sensor_battery
            content: >
              {% set battery_level = states('sensor.drone_room_motion_sensor_battery') | int %} 
              {{ battery_level }}%
            icon: >
              {% set battery_level = states('sensor.drone_room_motion_sensor_battery') | int %}
              {% if battery_level >= 95 %}
                mdi:battery
              {% elif battery_level >= 80 %}
                mdi:battery-90
              {% elif battery_level >= 60 %}
                mdi:battery-80
              {% elif battery_level >= 40 %}
                mdi:battery-60
              {% elif battery_level >= 20 %}
                mdi:battery-40
              {% elif battery_level > 10 %}
                mdi:battery-20
              {% else %}
                mdi:battery-alert
              {% endif %}
            icon_color: >
              {% set battery_level = states('sensor.drone_room_motion_sensor_battery') | int %}
              {% if battery_level >= 75 %}
                green
              {% elif battery_level >= 50 %}
                yellow
              {% elif battery_level >= 25 %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
        alignment: center
      - type: horizontal-stack
        cards:
          - show_name: true
            show_icon: true
            type: button
            tap_action:
              action: toggle
            entity: switch.drone_charger
            name: Drone Charger
            icon: mdi:quadcopter
            show_state: true
            icon_height: 50px
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Side Door
            secondary: |-
              {% if is_state('binary_sensor.side_door_contact_sensor','off') %}
                Closed
              {% else %}
                Open
              {% endif %}
            icon: |-
              {% if is_state('binary_sensor.side_door_contact_sensor','off') %}
                mdi:door-closed
              {% else %}
                mdi:door-open
              {% endif %}
            entity: binary_sensor.side_door_contact_sensor
            icon_color: |-
              {% if is_state('binary_sensor.side_door_contact_sensor','off') %}
                green
              {% else %}
                red
              {% endif %}
            badge_icon: >-
              {% set battery_level = states('sensor.side_door_contact_sensor_battery') | int %} 
              {% if battery_level >= 95 %}
                mdi:battery
              {% elif battery_level >= 80 %}
                mdi:battery-90
              {% elif battery_level >= 60 %}
                mdi:battery-70
              {% elif battery_level >= 40 %}
                mdi:battery-50
              {% elif battery_level >= 20 %}
                mdi:battery-30
              {% else %}
                mdi:battery-alert
              {% endif %}
            badge_color: >-
              {% set battery_level = states('sensor.side_door_contact_sensor_battery') | int %} 
              {% if battery_level >= 95 %}
                green
              {% elif battery_level >= 80 %}
                green
              {% elif battery_level >= 60 %}
                yellow
              {% elif battery_level >= 40 %}
                yellow
              {% elif battery_level >= 20 %}
                red
              {% else %}
                red
              {% endif %}
            fill_container: true
            tap_action:
              action: more-info
            layout: vertical
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Energize
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.zigbee_group_drone_room
                secondary_info: none
                layout: vertical
                icon: mdi:flash
              - type: custom:mushroom-entity-card
                entity: script.dimmed
                name: Dimmed
                tap_action:
                  action: call-service
                  service: script.dimmed
                  service_data:
                    target_lights: light.zigbee_group_drone_room
                secondary_info: none
                layout: vertical
                icon: mdi:lightbulb-on-40
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_drone_room
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.drone_room_1
                name: Drone 1
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.drone_room_2
                name: Drone 2
                show_brightness_control: true
                use_light_color: true
                show_color_temp_control: true
    icon: mdi:quadcopter
  - title: Hallway
    path: hallway
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: binary_sensor.hallway_closet_contact_sensor
            icon: >
              {% if is_state('binary_sensor.hallway_closet_contact_sensor', 'on') %}
                mdi:account
              {% else %}
                mdi:account-outline
              {% endif %}
            content: ''
            tap_action:
              action: more-info
            icon_color: >
              {% if is_state('binary_sensor.hallway_closet_contact_sensor', 'on') %}
                lime
              {% else %}
                
              {% endif %}
          - type: template
            entity: sensor.hallway_closet_contact_sensor_battery
            content: >
              {% set battery_level = states('sensor.hallway_closet_contact_sensor_battery') | int %} 
              {{ battery_level }}%
            icon: >
              {% set battery_level = states('sensor.hallway_closet_contact_sensor_battery') | int %}
              {% if battery_level >= 95 %}
                mdi:battery
              {% elif battery_level >= 80 %}
                mdi:battery-90
              {% elif battery_level >= 60 %}
                mdi:battery-80
              {% elif battery_level >= 40 %}
                mdi:battery-60
              {% elif battery_level >= 20 %}
                mdi:battery-40
              {% elif battery_level > 10 %}
                mdi:battery-20
              {% else %}
                mdi:battery-alert
              {% endif %}
            icon_color: >
              {% set battery_level = states('sensor.hallway_closet_contact_sensor_battery') | int %}
              {% if battery_level >= 75 %}
                green
              {% elif battery_level >= 50 %}
                yellow
              {% elif battery_level >= 25 %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
        alignment: center
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Energize
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.hallway_group
                layout: vertical
                secondary_info: none
                icon: mdi:flash
              - type: custom:mushroom-entity-card
                entity: script.dimmed
                name: Dimmed
                tap_action:
                  action: call-service
                  service: script.dimmed
                  service_data:
                    target_lights: light.hallway_group
                layout: vertical
                secondary_info: none
                icon: mdi:lightbulb-on-40
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_hallway
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_hallway
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
    icon: mdi:hanger
  - title: Upstairs
    path: upstairs
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:palette
          primary: Scenes
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-entity-card
                entity: script.energize
                name: Energize
                tap_action:
                  action: call-service
                  service: script.energize
                  service_data:
                    target_lights: light.zigbee_group_upstairs
                layout: vertical
                secondary_info: none
                icon: mdi:flash
              - type: custom:mushroom-entity-card
                entity: script.dimmed
                name: Dimmed
                tap_action:
                  action: call-service
                  service: script.dimmed
                  service_data:
                    target_lights: light.zigbee_group_upstairs
                layout: vertical
                secondary_info: none
                icon: mdi:lightbulb-on-40
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_upstairs
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.upstairs_hallway_1
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
                name: Upstairs 1
              - type: custom:mushroom-light-card
                entity: light.upstairs_hallway_2
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
                name: Upstairs 2
    icon: mdi:home-floor-2
  - title: Weather
    path: house
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            entity: sensor.o_1pst_pm0_3
            name: pm0.3
            show_state: true
            icon: mdi:air-filter
            tap_action:
              action: more-info
              entity: sensor.o_1pst_pm0_3
            state:
              - value: 1601
                operator: '>='
                color: purple
              - value: 1201
                operator: '>='
                color: red
              - value: 801
                operator: '>='
                color: darkorange
              - value: 301
                operator: '>='
                color: yellow
              - value: 0
                operator: '>='
                color: limegreen
            styles:
              card:
                - border-radius: 12px
                - padding: 8px
                - background-color: var(--card-background-color)
              name:
                - font-size: 14px
                - color: var(--primary-text-color)
              state:
                - font-size: 14px
              icon:
                - width: 40px
                - height: 40px
          - type: custom:button-card
            entity: sensor.o_1pst_pm2_5
            name: pm2.5
            show_state: true
            icon: mdi:blur
            state:
              - value: 150
                operator: '>='
                color: purple
              - value: 50
                operator: '>='
                color: red
              - value: 25
                operator: '>='
                color: darkorange
              - value: 12.5
                operator: '>='
                color: yellow
              - value: 0
                operator: '>='
                color: limegreen
            styles:
              card:
                - border-radius: 12px
                - padding: 8px
                - background-color: var(--card-background-color)
              name:
                - font-size: 14px
                - color: var(--primary-text-color)
              state:
                - font-size: 14px
              icon:
                - width: 40px
                - height: 40px
          - type: custom:button-card
            entity: sensor.o_1pst_pm10
            name: pm10
            show_state: true
            icon: mdi:blur-linear
            state:
              - value: 150
                operator: '>='
                color: purple
              - value: 50
                operator: '>='
                color: red
              - value: 25
                operator: '>='
                color: darkorange
              - value: 12.5
                operator: '>='
                color: yellow
              - value: 0
                operator: '>='
                color: limegreen
            styles:
              card:
                - border-radius: 12px
                - padding: 8px
                - background-color: var(--card-background-color)
              name:
                - font-size: 14px
                - color: var(--primary-text-color)
              state:
                - font-size: 14px
              icon:
                - width: 40px
                - height: 40px
          - type: custom:button-card
            entity: sensor.geiger_counter_ionizing_radiation_power
            name: Radiation
            show_state: true
            icon: mdi:radioactive
            state:
              - value: 2
                operator: '>='
                color: purple
              - value: 1
                operator: '>='
                color: red
              - value: 0.3
                operator: '>='
                color: darkorange
              - value: 0.1
                operator: '>='
                color: yellow
              - value: 0
                operator: '>='
                color: limegreen
            styles:
              card:
                - border-radius: 12px
                - padding: 8px
                - background-color: var(--card-background-color)
              name:
                - font-size: 14px
                - color: var(--primary-text-color)
              state:
                - font-size: 14px
              icon:
                - width: 40px
                - height: 40px
      - type: custom:weather-chart-card
        entity: weather.pirateweather
        show_main: true
        show_temperature: true
        show_current_condition: true
        show_attributes: true
        show_time: false
        show_time_seconds: false
        show_day: false
        show_date: false
        show_humidity: true
        show_pressure: true
        show_wind_direction: true
        show_wind_speed: true
        show_sun: true
        show_feels_like: false
        show_dew_point: false
        show_wind_gust_speed: false
        show_visibility: false
        show_last_changed: false
        use_12hour_format: false
        icons_size: 25
        animated_icons: false
        icon_style: style1
        autoscroll: false
        forecast:
          precipitation_type: rainfall
          show_probability: false
          labels_font_size: '11'
          precip_bar_size: '100'
          style: style2
          show_wind_forecast: true
          condition_icons: true
          round_temp: false
          type: daily
          number_of_forecasts: '0'
          disable_animation: false
        units:
          speed: ''
        temp: sensor.ws2902_weather_temperature
        feels_like: sensor.ws2902_weather_feels_like
        humid: sensor.ws2902_weather_humidity
        winddir: sensor.ws2902_weather_wind_direction
        windspeed: sensor.ws2902_weather_wind_speed
        dew_point: sensor.ws2902_weather_dew_point
      - type: custom:layout-card
        cards:
          - type: custom:meteoalarm-card
            entities:
              - entity: sensor.[county]
            integration: weatheralerts
            override_headline: false
            hide_when_no_warning: true
            tap_action:
              action: url
              url_path: >-
                https://forecast.weather.gov/MapClick.php?lat=[latitude]&lon=[longitude]
        visibility:
          - condition: numeric_state
            entity: sensor.[county]
            above: 0
      - type: vertical-stack
        cards:
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#weather'
            button_type: name
            entity: sensor.ws2902_weather_feels_like
            name: Current Weather
            icon: mdi:weather-cloudy
            show_header: true
            show_name: true
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Temp
                secondary: >-
                  {{ states('sensor.ws2902_weather_temperature') | float | round(1) }}°F
                icon: mdi:thermometer
                entity: sensor.ws2902_weather_temperature
                icon_color: >-
                  {% set temp = states('sensor.ws2902_weather_temperature') | float %} 
                  {% if temp <= 32 %}
                    blue
                  {% elif temp <= 68 %}
                    cyan
                  {% elif temp <= 77 %}
                    green
                  {% elif temp <= 86 %}
                    yellow
                  {% elif temp <= 95 %}
                    orange
                  {% else %}
                    red
                  {% endif %}
                fill_container: true
                tap_action:
                  action: more-info
              - type: custom:mushroom-template-card
                primary: Humidity
                secondary: >-
                  {{ states('sensor.ws2902_weather_humidity') | float | round(1) }}%
                icon: mdi:water-percent
                entity: sensor.ws2902_weather_humidity
                icon_color: >-
                  {% set humidity = states('sensor.ws2902_weather_humidity') | float %} 
                  {% if humidity <= 50 %}
                    green
                  {% elif humidity <= 60 %}
                    lime
                  {% else %}
                    red
                  {% endif %}
                tap_action:
                  action: more-info
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Rel Pressure
                secondary: >-
                  {{ states('sensor.ws2902_weather_relative_pressure') | float | round(3) }} inHg
                icon: mdi:gauge
                entity: sensor.ws2902_weather_relative_pressure
                tap_action:
                  action: more-info
                color: >-
                  {% set pressure = states('sensor.ws2902_weather_relative_pressure') | float %}
                  {% if pressure < 29.0 %}
                    red
                  {% elif pressure >= 29.0 and pressure < 29.5 %}
                    orange
                  {% elif pressure >= 29.5 and pressure < 30.0 %}
                    yellow
                  {% elif pressure >= 30.0 and pressure < 30.5 %}
                    green
                  {% else %}
                    blue
                  {% endif %}
                features_position: bottom
              - type: custom:mushroom-template-card
                primary: Feels Like
                secondary: >-
                  {{ states('sensor.ws2902_weather_feels_like') | float | round(1) }}°F
                icon: mdi:thermometer
                entity: sensor.ws2902_weather_feels_like
                icon_color: >-
                  {% set temp = states('sensor.ws2902_weather_feels_like') | float %} 
                  {% if temp <= 32 %}
                    blue
                  {% elif temp <= 68 %}
                    cyan
                  {% elif temp <= 77 %}
                    green
                  {% elif temp <= 86 %}
                    yellow
                  {% elif temp <= 95 %}
                    orange
                  {% else %}
                    red
                  {% endif %}
                tap_action:
                  action: more-info
                fill_container: true
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Solar Rad
                secondary: >-
                  {{ '{:,.0f}'.format(states('sensor.smoothed_irradiance') | float) }} W/m²
                icon: |-
                  {% if states('sensor.smoothed_irradiance') | float > 0 %}
                    mdi:white-balance-sunny
                  {% else %}
                    mdi:weather-sunny
                  {% endif %}
                entity: sensor.smoothed_irradiance
                tap_action:
                  action: more-info
                color: |-
                  {% if states('sensor.smoothed_irradiance') | float > 0 %}
                    yellow
                  {% else %}
                    default
                  {% endif %}
                features_position: bottom
              - type: custom:mushroom-template-card
                primary: Sun Position
                secondary: |
                  {{ states('sensor.sun_position_relative_to_house') }}
                icon: >-
                  {% if states('sensor.ws2902_weather_solar_rad_lx') | float > 0 %}
                    mdi:white-balance-sunny
                  {% else %}
                    mdi:weather-sunny
                  {% endif %}
                entity: sensor.sun_position_relative_to_house
                icon_color: >-
                  {% if states('sensor.ws2902_weather_solar_rad_lx') | float > 0 %}
                    yellow
                  {% else %}
                    default
                  {% endif %}
                tap_action:
                  action: more-info
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Wind Speed
                secondary: >-
                  {{ states('sensor.ws2902_weather_wind_speed') | float | round(2) }}mph
                icon: mdi:weather-windy
                entity: sensor.ws2902_weather_wind_speed
                icon_color: >-
                  {% set speed = states("sensor.ws2902_weather_wind_speed") | float(0) %}
                  {% if speed < 5 %}
                    green
                  {% elif speed < 15 %}
                    lime
                  {% elif speed < 30 %}
                    orange
                  {% else %}
                    red
                  {% endif %}
                tap_action:
                  action: more-info
              - type: custom:mushroom-template-card
                primary: Wind Dir
                secondary: >-
                  {{ states('sensor.ws2902_weather_wind_direction') | float | round(0) }}°
                icon: >-
                  {% set direction = states('sensor.ws2902_weather_wind_direction') | float %} 
                  {% if (direction >= 337.5 or direction < 22.5) %}
                    mdi:arrow-up
                  {% elif (direction >= 22.5 and direction < 67.5) %}
                    mdi:arrow-top-right
                  {% elif (direction >= 67.5 and direction < 112.5) %}
                    mdi:arrow-right
                  {% elif (direction >= 112.5 and direction < 157.5) %}
                    mdi:arrow-bottom-right
                  {% elif (direction >= 157.5 and direction < 202.5) %}
                    mdi:arrow-down
                  {% elif (direction >= 202.5 and direction < 247.5) %}
                    mdi:arrow-bottom-left
                  {% elif (direction >= 247.5 and direction < 292.5) %}
                    mdi:arrow-left
                  {% elif (direction >= 292.5 and direction < 337.5) %}
                    mdi:arrow-top-left
                  {% endif %}
                entity: sensor.ws2902_weather_wind_direction
                icon_color: >-
                  {% set speed = states("sensor.ws2902_weather_wind_speed") | float(0) %} 
                  {% if speed < 5 %}
                    green
                  {% elif speed < 15 %}
                    lime
                  {% elif speed < 30 %}
                    orange
                  {% else %}
                    red
                  {% endif %}
                tap_action:
                  action: more-info
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Daily Rain
                secondary: >-
                  {{ states('sensor.ws2902_weather_daily_rain') | float | round(2) }}in
                icon: mdi:weather-rainy
                entity: sensor.ws2902_weather_daily_rain
                icon_color: >-
                  {% set rain = states('sensor.ws2902_weather_daily_rain') | float %}
                  {% if rain == 0 %}
                    #ADD8E6
                  {% elif rain > 0 and rain <= 2 %}
                    #5DADE2
                  {% elif rain > 2 and rain <= 5 %}
                    #2874A6
                  {% elif rain > 5 and rain <= 8 %}
                    #1A5276
                  {% else %}
                    #154360
                  {% endif %}
                tap_action:
                  action: more-info
              - type: custom:mushroom-template-card
                primary: Last Rain
                secondary: >-
                  {% set last_rain = states('sensor.ws2902_weather_last_rain') %} 
                  {{ (as_timestamp(now()) - as_timestamp(last_rain)) // 86400 | int }} days
                icon: mdi:water
                entity: sensor.ws2902_weather_last_rain
                icon_color: >-
                  {% set last_rain = (as_timestamp(now()) - as_timestamp(states('sensor.ws2902_weather_last_rain'))) // 86400 | int %} 
                  {% if last_rain <= 7.0 %}
                    blue
                  {% else %}
                    default
                  {% endif %}
                tap_action:
                  action: more-info
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Event Rain
                secondary: >-
                  {{ states('sensor.ws2902_weather_event_rain') | float | round(2) }}in
                icon: mdi:weather-rainy
                entity: sensor.ws2902_weather_event_rain
                icon_color: >-
                  {% set rain = states('sensor.ws2902_weather_event_rain') | float %}
                  {% if rain == 0 %}
                    #ADD8E6
                  {% elif rain > 0 and rain <= 2 %}
                    #5DADE2
                  {% elif rain > 2 and rain <= 5 %}
                    #2874A6
                  {% elif rain > 5 and rain <= 8 %}
                    #1A5276
                  {% else %}
                    #154360
                  {% endif %}
                tap_action:
                  action: more-info
              - type: custom:mushroom-template-card
                primary: Intensity
                secondary: >-
                  {{ states('sensor.ws2902_weather_precipitation_intensity') | float | round(2) }}in/hr
                icon: mdi:weather-rainy
                entity: sensor.ws2902_weather_precipitation_intensity
                icon_color: >-
                  {% set rain = states('sensor.ws2902_weather_precipitation_intensity') | float %}
                  {% if rain == 0 %}
                    #ADD8E6
                  {% elif rain > 0 and rain <= 1 %}
                    #5DADE2
                  {% elif rain > 1 and rain <= 2 %}
                    #2874A6
                  {% elif rain > 2 and rain <= 3 %}
                    #1A5276
                  {% else %}
                    #154360
                  {% endif %}
                tap_action:
                  action: more-info
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Snow Σ
                secondary: >-
                  {{ states('sensor.pirateweather_current_day_snow_accumulation') | float | round(2) }}in
                icon: mdi:weather-snowy
                entity: sensor.pirateweather_current_day_snow_accumulation
                icon_color: >-
                  {% set rain = states('sensor.pirateweather_current_day_snow_accumulation') | float %}
                  {% if rain == 0 %}
                    #ADD8E6
                  {% elif rain > 0 and rain <= 0.5 %}
                    #5DADE2
                  {% elif rain > 0.5 and rain <= 1 %}
                    #2874A6
                  {% elif rain > 1 and rain <= 2 %}
                    #1A5276
                  {% else %}
                    #154360
                  {% endif %}
                tap_action:
                  action: more-info
              - type: custom:mushroom-template-card
                primary: Ice Σ
                secondary: >-
                  {{ states('sensor.pirateweather_current_day_ice_accumulation') | float | round(2) }}in
                icon: mdi:skate
                entity: sensor.pirateweather_current_day_ice_accumulation
                icon_color: >-
                  {% set rain = states('sensor.pirateweather_current_day_ice_accumulation') | float %}
                  {% if rain == 0 %}
                    #ADD8E6
                  {% elif rain > 0 and rain <= 0.5 %}
                    #5DADE2
                  {% elif rain > 0.5 and rain <= 0.75 %}
                    #2874A6
                  {% elif rain > 0.75 and rain <= 1 %}
                    #1A5276
                  {% else %}
                    #154360
                  {% endif %}
                tap_action:
                  action: more-info
          - type: horizontal-stack
            cards: []
      - type: custom:bubble-card
        card_type: horizontal-buttons-stack
        1_link: '#weather'
        1_name: Weather Details
        1_icon: mdi:weather-cloudy
    icon: mdi:weather-sunny
  - title: Ecobee
    path: ecobee
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            entity: sensor.apollo_air_1_pm_1mm
            name: pm1
            show_state: true
            icon: mdi:air-filter
            tap_action:
              action: more-info
              entity: sensor.apollo_air_1_pm_1mm
            state:
              - value: 31
                operator: '>='
                color: purple
              - value: 16
                operator: '>='
                color: red
              - value: 11
                operator: '>='
                color: darkorange
              - value: 6
                operator: '>='
                color: yellow
              - value: 0
                operator: '>='
                color: limegreen
            styles:
              card:
                - border-radius: 12px
                - padding: 8px
                - background-color: var(--card-background-color)
              name:
                - font-size: 14px
                - color: var(--primary-text-color)
              state:
                - font-size: 14px
              icon:
                - width: 40px
                - height: 40px
          - type: custom:button-card
            entity: sensor.apollo_air_1_pm_2_5mm
            name: pm2.5
            show_state: true
            icon: mdi:blur
            state:
              - value: 250.5
                operator: '>='
                color: purple
              - value: 150.5
                operator: '>='
                color: red
              - value: 55.5
                operator: '>='
                color: darkorange
              - value: 35.5
                operator: '>='
                color: yellow
              - value: 0
                operator: '>='
                color: limegreen
            styles:
              card:
                - border-radius: 12px
                - padding: 8px
                - background-color: var(--card-background-color)
              name:
                - font-size: 14px
                - color: var(--primary-text-color)
              state:
                - font-size: 14px
              icon:
                - width: 40px
                - height: 40px
          - type: custom:button-card
            entity: sensor.apollo_air_1_pm_10mm
            name: pm10
            show_state: true
            icon: mdi:blur-linear
            state:
              - value: 351
                operator: '>='
                color: purple
              - value: 251
                operator: '>='
                color: red
              - value: 101
                operator: '>='
                color: darkorange
              - value: 51
                operator: '>='
                color: yellow
              - value: 0
                operator: '>='
                color: limegreen
            styles:
              card:
                - border-radius: 12px
                - padding: 8px
                - background-color: var(--card-background-color)
              name:
                - font-size: 14px
                - color: var(--primary-text-color)
              state:
                - font-size: 14px
              icon:
                - width: 40px
                - height: 40px
      - type: horizontal-stack
        cards:
          - type: custom:simple-thermostat
            entity: climate.ecobee_thermostat
            header:
              name: Home
              icon: mdi:thermometer
            layout:
              mode:
                icons: true
                headings: false
                names: true
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: >
              {% set eff = states('sensor.pm2_5_filter_effectiveness_24h_avg') | float(0) %} 
              {% if eff > 70 %}
                Furnace Filter: Good
              {% elif eff > 40 %}
                Furnace Filter: Fair
              {% else %}
                Furnace Filter: Poor
              {% endif %}
            secondary: >-
              Efficiency: {{ states('sensor.pm2_5_filter_effectiveness_24h_avg') | float(0) | round(0) }}%
            icon: mdi:air-filter
            tap_action:
              action: more-info
            hold_action:
              action: more-info
            entity: sensor.pm2_5_filter_effectiveness_24h_avg
            color: >
              {% set eff = states('sensor.pm2_5_filter_effectiveness_24h_avg') | float(0) %} {% if eff > 70 %}
                green
              {% elif eff > 40 %}
                orange
              {% else %}
                red
              {% endif %}
            vertical: true
            features_position: bottom
          - type: custom:mushroom-legacy-template-card
            primary: Filter Age
            secondary: '{{ states(''sensor.furnace_filter_age'') }} days'
            icon: mdi:calendar-clock
            icon_color: >
              {% set age = states('sensor.furnace_filter_age') | int(0) %} 
              {% if age > 120 %}
                red
              {% elif age > 60 %}
                orange
              {% else %}
                blue
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
            fill_container: true
            hold_action:
              action: perform-action
              perform_action: script.event_furnace_filter_changed
              target: {}
            entity: sensor.furnace_filter_age
    icon: mdi:home-thermometer
  - title: Vacuums
    path: vacuums
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mod-card
        card_mod:
          style:
            vacuum-card$: |
              .status-text {
                margin-left: 0 !important;
              }
        card:
          type: custom:vacuum-card
          entity: vacuum.d10_plus_gen_2_main_floor
          actions:
            start:
              service: vacuum.start
              service_data:
                entity_id: vacuum.d10_plus_gen_2_main_floor
          stats:
            default:
              - entity_id: sensor.d10_plus_gen_2_main_floor_filter_left
                value_template: '{{ value | round(0) }}'
                unit: '%'
                subtitle: Filter
              - entity_id: sensor.d10_plus_gen_2_main_floor_side_brush_left
                value_template: '{{ value | round(0) }}'
                unit: '%'
                subtitle: Side brush
              - entity_id: sensor.d10_plus_gen_2_main_floor_main_brush_left
                value_template: '{{ value | round(0) }}'
                unit: '%'
                subtitle: Main brush
            cleaning:
              - entity_id: sensor.main_floor_cleaning_progress
                unit: '%'
                subtitle: Complete
              - entity_id: sensor.d10_plus_gen_2_main_floor_current_room
                subtitle: Location
          shortcuts:
            - name: Living Room
              service: script.vacuum_clean_segment
              service_data:
                target_vacuum: vacuum.d10_plus_gen_2_main_floor
                segment: 2
              icon: mdi:sofa
            - name: Bathroom
              service: script.vacuum_clean_segment
              service_data:
                target_vacuum: vacuum.d10_plus_gen_2_main_floor
                segment: 1
              icon: mdi:toilet
            - name: Kitchen
              service: script.vacuum_clean_segment
              service_data:
                target_vacuum: vacuum.d10_plus_gen_2_main_floor
                segment: 4
              icon: mdi:fridge
            - name: Drone Room
              service: script.vacuum_clean_segment
              service_data:
                target_vacuum: vacuum.d10_plus_gen_2_main_floor
                segment: 3
              icon: mdi:quadcopter
            - name: Dining Room
              service: script.vacuum_clean_segment
              service_data:
                target_vacuum: vacuum.d10_plus_gen_2_main_floor
                segment: 5
              icon: mdi:table-chair
      - type: custom:mod-card
        card_mod:
          style:
            vacuum-card$: |
              .status-text {
                margin-left: 0 !important;
              }
        card:
          type: custom:vacuum-card
          entity: vacuum.d10_plus_gen_2_upstairs
          actions:
            start:
              service: vacuum.start
              service_data:
                entity_id: vacuum.d10_plus_gen_2_upstairs
          stats:
            default:
              - entity_id: sensor.d10_plus_gen_2_upstairs_filter_left
                value_template: '{{ value | round(0) }}'
                unit: '%'
                subtitle: Filter
              - entity_id: sensor.d10_plus_gen_2_upstairs_side_brush_left
                value_template: '{{ value | round(0) }}'
                unit: '%'
                subtitle: Side brush
              - entity_id: sensor.d10_plus_gen_2_upstairs_main_brush_left
                value_template: '{{ value | round(0) }}'
                unit: '%'
                subtitle: Main brush
            cleaning:
              - entity_id: sensor.upstairs_cleaning_progress
                unit: '%'
                subtitle: Complete
              - entity_id: sensor.d10_plus_gen_2_upstairs_current_room
                subtitle: Location
          shortcuts:
            - name: Bedroom
              service: script.vacuum_clean_segment
              service_data:
                target_vacuum: vacuum.d10_plus_gen_2_upstairs
                segment: 2
              icon: mdi:bed-king-outline
            - name: Bathroom
              service: script.vacuum_clean_segment
              service_data:
                target_vacuum: vacuum.d10_plus_gen_2_upstairs
                segment: 1
              icon: mdi:toilet
            - name: Meditation
              service: script.vacuum_clean_segment
              service_data:
                target_vacuum: vacuum.d10_plus_gen_2_upstairs
                segment: 3
              icon: mdi:meditation
            - name: Office
              service: script.vacuum_clean_segment
              service_data:
                target_vacuum: vacuum.d10_plus_gen_2_upstairs
                segment: 4
              icon: mdi:monitor-shimmer
            - name: Hallway
              service: script.vacuum_clean_segment
              service_data:
                target_vacuum: vacuum.d10_plus_gen_2_upstairs
                segment: 5
              icon: mdi:foot-print
      - type: custom:mod-card
        card_mod:
          style:
            vacuum-card$: |
              .status-text {
                margin-left: 0 !important;
              }
        card:
          type: custom:vacuum-card
          entity: vacuum.d10_plus_gen_2_basement
          actions:
            start:
              service: vacuum.start
              service_data:
                entity_id: vacuum.d10_plus_gen_2_basement
          stats:
            default:
              - entity_id: sensor.d10_plus_gen_2_basement_filter_left
                value_template: '{{ value | round(0) }}'
                unit: '%'
                subtitle: Filter
              - entity_id: sensor.d10_plus_gen_2_basement_side_brush_left
                value_template: '{{ value | round(0) }}'
                unit: '%'
                subtitle: Side brush
              - entity_id: sensor.d10_plus_gen_2_basement_main_brush_left
                value_template: '{{ value | round(0) }}'
                unit: '%'
                subtitle: Main brush
            cleaning:
              - entity_id: sensor.basement_cleaning_progress
                unit: '%'
                subtitle: Complete
              - entity_id: sensor.d10_plus_gen_2_basement_current_room
                subtitle: Location
          shortcuts:
            - name: Main Room
              service: script.vacuum_clean_segment
              service_data:
                target_vacuum: vacuum.d10_plus_gen_2_basement
                segment: 2
              icon: mdi:archive-outline
            - name: Stairs
              service: script.vacuum_clean_segment
              service_data:
                target_vacuum: vacuum.d10_plus_gen_2_basement
                segment: 1
              icon: mdi:foot-print
    icon: mdi:vacuum
  - title: Basement
    path: basement
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-chips-card
        chips:
          - type: template
            entity: binary_sensor.basement_door_contact_sensor
            icon: >
              {% if is_state('binary_sensor.basement_door_contact_sensor', 'on')
              or is_state('binary_sensor.laundry_door_contact_sensor', 'on')  %}
                mdi:account
              {% else %}
                mdi:account-outline
              {% endif %}
            content: ''
            tap_action:
              action: more-info
            icon_color: >
              {% if is_state('binary_sensor.basement_door_contact_sensor', 'on')
              or is_state('binary_sensor.laundry_door_contact_sensor', 'on')  %}
                lime
              {% else %}
                
              {% endif %}
          - type: template
            entity: sensor.basement_temp_humidity_sensor_temperature
            icon: mdi:thermometer
            content: >
              {{ states('sensor.basement_temp_humidity_sensor_temperature') | float | round(0) }}°F
            icon_color: >
              {% set temp = states('sensor.basement_temp_humidity_sensor_temperature') | float %} 
              {% if temp <= 32 %}
                blue
              {% elif temp <= 68 %}
                cyan
              {% elif temp <= 77 %}
                green
              {% elif temp <= 86 %}
                yellow
              {% elif temp <= 95 %}
                orange
              {% else %}
                red
              {% endif %}
            tap_action:
              action: more-info
          - type: template
            entity: sensor.basement_temp_humidity_sensor_humidity
            icon: mdi:water-percent
            icon_color: >
              {% set humidity = states('sensor.basement_temp_humidity_sensor_humidity') | float %}
              {% if humidity <= 50 %}
                green
              {% elif humidity <= 60 %}
                lime
              {% else %}
                red
              {% endif %}
            content: >
              {{ states('sensor.basement_temp_humidity_sensor_humidity') | float | round(0) }}%
            tap_action:
              action: more-info
        alignment: center
      - type: horizontal-stack
        cards:
          - show_name: true
            show_icon: true
            type: button
            tap_action:
              action: toggle
            entity: switch.lawn_charger
            name: Lawn Charger
            icon: mdi:mower
            icon_height: 48px
            show_state: true
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Washer
            secondary: |
              {% if is_state('switch.washing_machine_switch', 'on') and
                 is_state('binary_sensor.washing_machine_running', 'on') %}
                Running
              {% elif is_state('switch.washing_machine_switch', 'on') and
                 not is_state('binary_sensor.washing_machine_running', 'on') %}
                 On
              {% else %}
                Off
              {% endif %}
            icon: mdi:washing-machine
            icon_color: |
              {% if is_state('switch.washing_machine_switch', 'on') and
                 is_state('binary_sensor.washing_machine_running', 'on') %}
                green
              {% elif is_state('switch.washing_machine_switch', 'on') and
                 not is_state('binary_sensor.washing_machine_running', 'on') %}
                 blue
              {% else %}
                white
              {% endif %}
            layout: vertical
            tap_action:
              action: more-info
            entity: switch.washing_machine_switch
          - type: custom:mushroom-template-card
            primary: Dryer
            secondary: |
              {% if is_state('input_boolean.dryer_running', 'on') %}
                Drying
              {% else %}
                Off
              {% endif %}
            icon: mdi:tumble-dryer
            icon_color: |
              {% if is_state('input_boolean.dryer_running', 'on') %}
                green
              {% else %}
                white
              {% endif %}
            layout: vertical
            tap_action:
              action: more-info
            entity: input_boolean.dryer_running
            fill_container: true
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: >-
              {% ifis_state('binary_sensor.basement_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}

              {% else %}
                Leak Detected
              {% endif %}
            secondary: Laundry Floor
            icon: >-
              {% if is_state('binary_sensor.basement_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}
                mdi:water-outline
              {% else %}
                mdi:water-alert
              {% endif %}
            entity: binary_sensor.basement_water_leak_sensor_water_leak_detected
            badge_icon: ''
            tap_action:
              action: more-info
            color: >-
              {% if is_state('binary_sensor.basement_water_leak_sensor_water_leak_detected','off')
              and is_state('input_boolean.leak_detected','off') %}
                green
              {% else %}
                red
              {% endif %}
            vertical: true
            features_position: bottom
        visibility:
          - condition: state
            entity: binary_sensor.basement_water_leak_sensor_water_leak_detected
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Basement Door
            secondary: >-
              {% if is_state('binary_sensor.basement_door_contact_sensor','off') %}
                Closed
              {% elif is_state('binary_sensor.basement_door_contact_sensor','on') %}
                Open
              {% else %}
                Unavailable
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.basement_door_contact_sensor','off') %}
                mdi:door-closed
              {% elif is_state('binary_sensor.basement_door_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed-cancel
              {% endif %}
            entity: binary_sensor.basement_door_contact_sensor
            icon_color: >-
              {% if is_state('binary_sensor.basement_door_contact_sensor','off') %}
                green
              {% elif is_state('binary_sensor.basement_door_contact_sensor','on') %}
                red
              {% else %}
                yellow
              {% endif %}
            badge_icon: >-
              {% set battery_level = states('sensor.basement_door_contact_sensor_battery') | int %}
              {% if battery_level >= 95 %}
                mdi:battery
              {% elif battery_level >= 80 %}
                mdi:battery-90
              {% elif battery_level >= 60 %}
                mdi:battery-70
              {% elif battery_level >= 40 %}
                mdi:battery-50
              {% elif battery_level >= 20 %}
                mdi:battery-30
              {% else %}
                mdi:battery-alert
              {% endif %}
            badge_color: >-
              {% set battery_level = states('sensor.basement_door_contact_sensor_battery') | int %}

              {% if battery_level >= 95 %}
                green
              {% elif battery_level >= 80 %}
                green
              {% elif battery_level >= 60 %}
                yellow
              {% elif battery_level >= 40 %}
                yellow
              {% elif battery_level >= 20 %}
                red
              {% else %}
                red
              {% endif %}
            fill_container: true
            tap_action:
              action: more-info
            layout: vertical
          - type: custom:mushroom-template-card
            primary: Laundry Door
            secondary: >-
              {% if is_state('binary_sensor.laundry_door_contact_sensor','off') %}
                Closed
              {% elif is_state('binary_sensor.laundry_door_contact_sensor','on') %}
                Open
              {% else %}
                Unavailable
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.laundry_door_contact_sensor','off') %}
                mdi:door-closed
              {% elif is_state('binary_sensor.laundry_door_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed-cancel
              {% endif %}
            entity: binary_sensor.laundry_door_contact_sensor
            icon_color: >-
              {% if is_state('binary_sensor.laundry_door_contact_sensor','off') %}
                green
              {% elif is_state('binary_sensor.laundry_door_contact_sensor','on') %}
                red
              {% else %}
                yellow
              {% endif %}
            badge_icon: >-
              {% set battery_level = states('sensor.laundry_door_contact_sensor_battery') | int %}
              {% if battery_level >= 95 %}
                mdi:battery
              {% elif battery_level >= 80 %}
                mdi:battery-90
              {% elif battery_level >= 60 %}
                mdi:battery-70
              {% elif battery_level >= 40 %}
                mdi:battery-50
              {% elif battery_level >= 20 %}
                mdi:battery-30
              {% else %}
                mdi:battery-alert
              {% endif %}
            badge_color: >-
              {% set battery_level = states('sensor.laundry_door_contact_sensor_battery') | int %}
              {% if battery_level >= 95 %}
                green
              {% elif battery_level >= 80 %}
                green
              {% elif battery_level >= 60 %}
                yellow
              {% elif battery_level >= 40 %}
                yellow
              {% elif battery_level >= 20 %}
                red
              {% else %}
                red
              {% endif %}
            fill_container: true
            tap_action:
              action: more-info
            layout: vertical
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:lightbulb-multiple
          primary: Lights
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: custom:mushroom-template-card
            primary: ''
            card_mod:
              style: |
                ha-card {
                  height: 0;
                  padding: 0;
                  margin: 0;
                  box-shadow: none;
                  background: transparent;
                }
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_basement
                name: All Lights
                use_light_color: true
                show_brightness_control: true
                show_color_control: false
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_basement_stairs
                name: Stairs
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_basement_room
                name: Main Room
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
              - type: custom:mushroom-light-card
                entity: light.zigbee_group_basement_laundry
                use_light_color: true
                show_brightness_control: true
                show_color_temp_control: true
                name: Laundry
    icon: mdi:home-floor-b
  - title: Locks
    path: locks
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-lock-card
            entity: lock.front_door_lock
            name: Front Door
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            primary_info: name
            secondary_info: last-changed
            layout: vertical
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-lock-card
            entity: lock.back_door_lock
            name: Back Door
            primary_info: name
            secondary_info: last-changed
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            layout: vertical
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-lock-card
            entity: lock.garage_handle_lock
            name: Garage Handle
            tap_action:
              action: toggle
            hold_action:
              action: more-info
            primary_info: name
            secondary_info: last-changed
            layout: vertical
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            entity: binary_sensor.back_door_contact_sensor
            primary: Back Door
            secondary: |
              {% if is_state('binary_sensor.back_door_contact_sensor','on') %}
                Open
              {% else %}
                Closed
              {% endif %}
            icon: |
              {% if is_state('binary_sensor.back_door_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.back_door_contact_sensor','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
            fill_container: true
        visibility:
          - condition: state
            entity: binary_sensor.back_door_contact_sensor
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            entity: binary_sensor.front_door_contact_sensor
            primary: Front Door
            secondary: |
              {% if is_state('binary_sensor.front_door_contact_sensor','on') %}
                Open
              {% else %}
                Closed
              {% endif %}
            icon: |
              {% if is_state('binary_sensor.front_door_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.front_door_contact_sensor','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
            fill_container: true
        visibility:
          - condition: state
            entity: binary_sensor.front_door_contact_sensor
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            entity: binary_sensor.side_door_contact_sensor
            primary: Side Door
            secondary: |
              {% if is_state('binary_sensor.side_door_contact_sensor','on') %}
                Open
              {% else %}
                Closed
              {% endif %}
            icon: |
              {% if is_state('binary_sensor.side_door_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.side_door_contact_sensor','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
            fill_container: true
        visibility:
          - condition: state
            entity: binary_sensor.side_door_contact_sensor
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            entity: binary_sensor.garage_door_contact_sensor
            primary: Garage Door
            secondary: |
              {% if is_state('binary_sensor.garage_door_contact_sensor','on') %}
                Open
              {% else %}
                Closed
              {% endif %}
            icon: |
              {% if is_state('binary_sensor.garage_door_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.garage_door_contact_sensor','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
            fill_container: true
        visibility:
          - condition: state
            entity: binary_sensor.garage_door_contact_sensor
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            entity: binary_sensor.basement_door_contact_sensor
            primary: Basement Door
            secondary: >
              {% if is_state('binary_sensor.basement_door_contact_sensor','on') %}
                Open
              {% else %}
                Closed
              {% endif %}
            icon: >
              {% if is_state('binary_sensor.basement_door_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed
              {% endif %}
            icon_color: >
              {% if is_state('binary_sensor.basement_door_contact_sensor','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
            fill_container: true
        visibility:
          - condition: state
            entity: binary_sensor.basement_door_contact_sensor
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            entity: binary_sensor.laundry_door_contact_sensor
            primary: Laundry Door
            secondary: >
              {% if is_state('binary_sensor.laundry_door_contact_sensor','on') %}
                Open
              {% else %}
                Closed
              {% endif %}
            icon: >
              {% if is_state('binary_sensor.laundry_door_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed
              {% endif %}
            icon_color: >
              {% if is_state('binary_sensor.laundry_door_contact_sensor','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
            fill_container: true
        visibility:
          - condition: state
            entity: binary_sensor.laundry_door_contact_sensor
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Main Garage Side
            secondary: >-
              {% if is_state('binary_sensor.main_garage_side_door_contact_sensor_opening','off') %}
                Closed
              {% else %}
                Open
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.main_garage_side_door_contact_sensor','off') %}
                mdi:door-closed
              {% else %}
                mdi:door-open
              {% endif %}
            entity: binary_sensor.main_garage_side_door_contact_sensor
            icon_color: >-
              {% if is_state('binary_sensor.main_garage_side_door_contact_sensor','off') %}
                green
              {% else %}
                red
              {% endif %}
            fill_container: true
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.main_garage_side_door_contact_sensor
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Side Garage Side
            secondary: >-
              {% if is_state('binary_sensor.side_garage_side_door_opening','off') %}
                Closed
              {% else %}
                Open
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.side_garage_side_door_contact_sensor','off') %}
                mdi:door-closed
              {% else %}
                mdi:door-open
              {% endif %}
            entity: binary_sensor.side_garage_side_door_contact_sensor
            icon_color: >-
              {% if is_state('binary_sensor.side_garage_side_door_contact_sensor','off') %}
                green
              {% else %}
                red
              {% endif %}
            fill_container: true
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.side_garage_side_door_contact_sensor
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            entity: sensor.outer_doors_open
            primary: |
              {% if states('sensor.outer_doors_open') | int > 0 %}
                Doors Open
              {% else %}
                All Doors Closed
              {% endif %}
            secondary: ''
            icon: |
              {% if states('sensor.outer_doors_open') | int > 0 %}
                mdi:door-open
              {% else %}
                mdi:door-closed
              {% endif %}
            icon_color: |
              {% if states('sensor.outer_doors_open') | int > 0 %}
                red
              {% else %}
                green
              {% endif %}
            visibility:
              - condition: numeric_state
                entity: sensor.outer_doors_open
                below: 1
            layout: vertical
            fill_container: false
            tap_action:
              action: more-info
        visibility:
          - condition: numeric_state
            entity: sensor.outer_doors_open
            below: 1
    icon: mdi:door-closed-lock
  - title: Rooms
    path: rooms
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-title-card
        title: Occupied Rooms
        visibility:
          - condition: numeric_state
            entity: sensor.rooms_occupied
            above: 0
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Living Room
            entity: binary_sensor.living_room_ep1_occupancy
            icon: |
              {% if is_state('binary_sensor.living_room_ep1_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.living_room_ep1_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.living_room_ep1_occupancy
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Kitchen
            entity: binary_sensor.kitchen_ep1_occupancy
            icon: |
              {% if is_state('binary_sensor.kitchen_ep1_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.kitchen_ep1_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.kitchen_ep1_occupancy
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Bedroom
            entity: binary_sensor.bedroom_ep1_occupancy
            icon: >
              {% if is_state('binary_sensor.master_bedroom_ep1_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: >
              {% if is_state('binary_sensor.master_bedroom_ep1_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.master_bedroom_ep1_occupancy
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Master Bath
            entity: light.master_bath
            icon: |
              {% if is_state('binary_sensor.master_bath_ep1_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.master_bath_ep1_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.master_bath_ep1_occupancy
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Library
            entity: binary_sensor.library_ep1_occupancy
            icon: |
              {% if is_state('binary_sensor.library_ep1_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.library_ep1_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.library_ep1_occupancy
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Meditation
            entity: binary_sensor.meditation_ep1_occupancy
            icon: |
              {% if is_state('binary_sensor.meditation_ep1_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.meditation_ep1_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.meditation_ep1_occupancy
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Front Porch
            entity: light.front_porch
            icon: |
              {% if is_state('binary_sensor.front_porch_ep1_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.front_porch_ep1_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: light.front_porch
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Garage
            entity: binary_sensor.garage_ep1_occupancy
            icon: |
              {% if is_state('binary_sensor.garage_ep1_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.garage_ep1_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.garage_ep1_occupancy
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Bathroom
            entity: light.bathroom
            icon: |
              {% if is_state('binary_sensor.bathroom_ep1_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.bathroom_ep1_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.bathroom_ep1_occupancy
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Basement
            entity: light.basement
            icon: |
              {% if is_state('binary_sensor.basement_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.basement_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.basement_ep1_occupancy
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Dining Room
            entity: light.dining_room
            icon: |
              {% if is_state('binary_sensor.dining_room_ep1_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.dining_room_ep1_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.dining_room_ep1_occupancy
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Drone Room
            entity: light.drone_room
            icon: |
              {% if is_state('binary_sensor.drone_room_ep1_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.drone_room_ep1_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.drone_room_ep1_occupancy
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Hallway
            entity: light.hallway
            icon: |
              {% if is_state('binary_sensor.hallway_ep1_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.hallway_ep1_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.hallway_ep1_occupancy
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Upstairs
            entity: light.upstairs
            icon: |
              {% if is_state('binary_sensor.upstairs_ep1_occupancy', 'on') %}
                mdi:human
              {% else %}
                mdi:account-outline
              {% endif %}
            icon_color: |
              {% if is_state('binary_sensor.upstairs_ep1_occupancy', 'on') %}
                green
              {% else %}
                grey
              {% endif %}
            tap_action:
              action: more-info
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.upstairs_ep1_occupancy
            state: 'on'
      - type: custom:mushroom-template-card
        primary: All Rooms Empty
        secondary: ''
        icon: |-
          {% if states('sensor.rooms_occupied') | int < 1 %}
            mdi:account-off-outline
          {% else %}
            mdi:account
          {% endif %}
        entity: sensor.rooms_occupied
        icon_color: |-
          {% if states('sensor.rooms_occupied') | int < 1 %}
            green
          {% else %}
            default
          {% endif %}
        fill_container: true
        visibility:
          - condition: numeric_state
            entity: sensor.rooms_occupied
            below: 1
        layout: vertical
    icon: mdi:home-analytics
  - title: Lights
    path: lights
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: custom:mushroom-title-card
        title: Living Room
        visibility:
          - condition: state
            entity: light.zigbee_group_living_room
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.end_table_1
            name: End Table 1
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.end_table_1
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.end_table_2
            name: End Table 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.end_table_2
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.floor_lamp
            name: Floor Lamp
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.floor_lamp
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.grandfather_clock
            name: Grandather Clock
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.grandfather_clock
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.glass_shelf_top
            name: Glass Shelf Top
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.glass_shelf_top
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.glass_shelf_bottom
            name: Glass Shelf Bottom
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.glass_shelf_bottom
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.top_of_clock
            name: Top of Clock
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.top_of_clock
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.top_of_clock_2
            name: Top of Clock 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.top_of_clock_2
            state: 'on'
      - type: custom:mushroom-title-card
        title: Kitchen
        visibility:
          - condition: state
            entity: light.zigbee_group_kitchen
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.cupboard_1
            name: Cupboard 1
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.cupboard_1
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.cupboard_2
            name: Cupboard 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.cupboard_2
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.cupboard_3
            name: Cupboard 3
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.cupboard_3
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.cupboard_4
            name: Cupboard 4
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.cupboard_4
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.cupboard_5
            name: Cupboard 5
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.cupboard_5
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.cupboard_6
            name: Cupboard 6
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.cupboard_6
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.cupboard_7
            name: Cupboard 7
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.cupboard_7
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.cupboard_8
            name: Cupboard 8
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.cupboard_8
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.sink
            name: Sink
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.sink
            state: 'on'
      - type: custom:mushroom-title-card
        title: Bedroom
        visibility:
          - condition: state
            entity: light.zigbee_group_bedroom
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.nightstand
            name: Nightstand
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.nightstand
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.bedside_table
            name: Bedside Table
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.bedside_table
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.window
            name: Window
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.window
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.corner_1
            name: Corner 1
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.corner_1
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.closet
            name: Closet
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.closet
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.closet
            name: Closet
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.closet_2
            state: 'on'
      - type: custom:mushroom-title-card
        title: Main Bath
        visibility:
          - condition: state
            entity: light.zigbee_group_main_bath
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.mirror_1
            name: Mirror 1
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.mirror_1
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.mirror_2
            name: Mirror 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.mirror_2
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.mirror_3
            name: Mirror 3
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.mirror_3
            state: 'on'
      - type: custom:mushroom-title-card
        title: Library
        visibility:
          - condition: state
            entity: light.zigbee_group_library
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.library_window
            name: Library Window
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.library_window
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.lego_shelf
            name: LEGO Shelf
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.lego_shelf
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.library_desk
            name: Library Desk
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.library_desk
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.bookshelf
            name: Bookshelf
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.bookshelf
            state: 'on'
      - type: custom:mushroom-title-card
        title: Meditation
        visibility:
          - condition: state
            entity: light.zigbee_group_meditation
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.cabinet
            name: Cabinet
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.cabinet
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.ceiling1
            name: Ceiling 1
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.ceiling1
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.ceiling2
            name: Ceiling 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.ceiling2
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.floor_lamp_2
            name: Floor Lamp 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.floor_lamp_2
            state: 'on'
      - type: custom:mushroom-title-card
        title: Front Porch
        visibility:
          - condition: state
            entity: light.zigbee_group_front_porch
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.door_light
            name: Doorlight
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.door_light
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.door_light_2
            name: Door Light 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.door_light_2
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.side_door
            name: Side Door
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.side_door
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.side_door_2
            name: Side Door 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.side_door_2
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.porch_6
            name: Porch 6
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.porch_6
            state: 'on'
      - type: custom:mushroom-title-card
        title: Garage
        visibility:
          - condition: state
            entity: light.zigbee_group_garage
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.driveway_floodlight
            name: Driveway Floodlight
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.driveway_floodlight
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.driveway_flood_light
            name: Driveway Flood Light
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.driveway_flood_light
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.garage_ceiling_1
            name: Garage Ceiling 1
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.garage_ceiling_1
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.garage_ceiling_2
            name: Garage Ceiling 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.garage_ceiling_2
            state: 'on'
      - type: custom:mushroom-title-card
        title: Bathroom
        visibility:
          - condition: state
            entity: light.zigbee_group_bathroom
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.bathroom_1
            name: Bathroom 1
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.bathroom_1
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.bathroom_2
            name: Bathroom 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.bathroom_2
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.bathroom_3
            name: Bathroom 3
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.bathroom_3
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.main_bath_nightlight_light
            name: Nightlight
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.main_bath_nightlight_light
            state: 'on'
      - type: custom:mushroom-title-card
        title: Basement
        visibility:
          - condition: state
            entity: light.zigbee_group_basement
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.basement_stairs_top
            name: Basement Stairs Top
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.basement_stairs_top
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.basement_stairs
            name: Basement Stairs
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.basement_stairs
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.laundry
            name: Laundry
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.laundry
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.basement_1
            name: Basement 1
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.basement_1
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.basement_2
            name: Basement 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.basement_2
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.basement_3
            name: Basement 3
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.basement_3
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.basement_4
            name: Basement 4
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.basement_4
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.basement_5
            name: Basement 5
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.basement_5
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.basement_6
            name: Basement 6
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.basement_6
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.basement_7
            name: Basement 7
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.basement_7
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.basement_8
            name: Basement 8
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.basement_8
            state: 'on'
      - type: custom:mushroom-title-card
        title: Dining Room
        visibility:
          - condition: state
            entity: light.zigbee_group_dining_room
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.table_1
            name: Table 1
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.table_1
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.table_2
            name: Table 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.table_2
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.table_3
            name: Table 3
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.table_3
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.table_4
            name: Table 4
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.table_4
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.table_5
            name: Table 5
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.table_5
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.table_6
            name: Table 6
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.table_6
            state: 'on'
      - type: custom:mushroom-title-card
        title: Drone Room
        visibility:
          - condition: state
            entity: light.zigbee_group_drone_room
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.drone_room_1
            name: Drone Room 1
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.drone_room_1
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.drone_room_2
            name: Drone Room 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.drone_room_2
            state: 'on'
      - type: custom:mushroom-title-card
        title: Hallway
        visibility:
          - condition: state
            entity: light.bathroom_hallway
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.zigbee_group_hallway
            name: Bathroom Hallway
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.bathroom_hallway
            state: 'on'
      - type: custom:mushroom-title-card
        title: Upstairs
        visibility:
          - condition: state
            entity: light.zigbee_group_upstairs
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.upstairs_hallway_1
            name: Upstairs Hallway 1
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.upstairs_hallway_1
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.upstairs_hallway_2
            name: Upstairs Hallway 2
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.upstairs_hallway_2
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            entity: sensor.total_lights_count
            primary: |
              {% if states('sensor.total_lights_count') | int > 0 %}
                Lights On
              {% else %}
                All Lights Off
              {% endif %}
            secondary: ''
            icon: |
              {% if states('sensor.total_lights_count') | int > 0 %}
                mdi:light-switch
              {% else %}
                mdi:light-switch-off
              {% endif %}
            icon_color: |
              {% if states('sensor.total_lights_count') | int > 0 %}
                green
              {% else %}
                grey
              {% endif %}
            visibility:
              - condition: numeric_state
                entity: sensor.total_lights_count
                below: 1
            layout: vertical
      - type: custom:mushroom-title-card
        title: Patio
        visibility:
          - condition: state
            entity: light.zigbee_group_patio
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.backsteps_light
            name: Backsteps
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.backsteps_light
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-light-card
            entity: light.garage_wall
            name: Garage Wall
            use_light_color: true
            show_brightness_control: true
            tap_action:
              action: toggle
        visibility:
          - condition: state
            entity: light.garage_wall
            state: 'on'
    icon: mdi:ceiling-light-multiple
  - title: Leaks
    path: leaks
    icon: mdi:water-percent
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Basement Laundry
            secondary: >-
              {% if is_state('binary_sensor.basement_water_leak_sensor_water_leak_detected','on') %}
                Leak Detected
              {% else %}
                Dry
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.basement_water_leak_sensor_water_leak_detected','on') %}
                mdi:water-alert
              {% else %}
                mdi:water-outline
              {% endif %}
            entity: binary_sensor.basement_water_leak_sensor_water_leak_detected
            icon_color: >-
              {% if is_state('binary_sensor.basement_water_leak_sensor_water_leak_detected','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.basement_water_leak_sensor_water_leak_detected
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Kitchen Sink
            secondary: >-
              {% if is_state('binary_sensor.kitchen_sink_water_leak_sensor_water_leak_detected','on') %}
                Leak Detected
              {% else %}
                Dry
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.kitchen_sink_water_leak_sensor_water_leak_detected','on') %}
                mdi:water-alert
              {% else %}
                mdi:water-outline
              {% endif %}
            entity: binary_sensor.kitchen_sink_water_leak_sensor_water_leak_detected
            icon_color: >-
              {% if is_state('binary_sensor.kitchen_sink_water_leak_sensor_water_leak_detected','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.kitchen_sink_water_leak_sensor_water_leak_detected
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Bathroom Sink
            secondary: >-
              {% if is_state('binary_sensor.bathroom_water_leak_sensor_water_leak_detected','on') %}
                Leak Detected
              {% else %}
                Dry
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.bathroom_water_leak_sensor_water_leak_detected','on') %}
                mdi:water-alert
              {% else %}
                mdi:water-outline
              {% endif %}
            entity: binary_sensor.bathroom_water_leak_sensor_water_leak_detected
            icon_color: >-
              {% if is_state('binary_sensor.bathroom_water_leak_sensor_water_leak_detected','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.bathroom_water_leak_sensor_water_leak_detected
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Master Bath Sink
            secondary: >-
              {% if is_state('binary_sensor.master_bath_water_leak_sensor_water_leak_detected','on') %}
                Leak Detected
              {% else %}
                Dry
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.master_bath_water_leak_sensor_water_leak_detected','on') %}
                mdi:water-alert
              {% else %}
                mdi:water-outline
              {% endif %}
            entity: binary_sensor.master_bath_water_leak_sensor_water_leak_detected
            icon_color: >-
              {% if is_state('binary_sensor.master_bath_water_leak_sensor_water_leak_detected','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.master_bath_water_leak_sensor_water_leak_detected
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Main Garage
            secondary: >-
              {% if is_state('binary_sensor.main_garage_water_leak_sensor_water_leak_detected','on') %}
                Leak Detected
              {% else %}
                Dry
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.main_garage_water_leak_sensor_water_leak_detected','on') %}
                mdi:water-alert
              {% else %}
                mdi:water-outline
              {% endif %}
            entity: binary_sensor.main_garage_water_leak_sensor_water_leak_detected
            icon_color: >-
              {% if is_state('binary_sensor.main_garage_water_leak_sensor_water_leak_detected','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.main_garage_water_leak_sensor_water_leak_detected
            state: 'on'
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Side Garage
            secondary: >-
              {% if is_state('binary_sensor.side_garage_water_leak_sensor_water_leak_detected','on') %}
                Leak Detected
              {% else %}
                Dry
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.side_garage_water_leak_sensor_water_leak_detected','on') %}
                mdi:water-alert
              {% else %}
                mdi:water-outline
              {% endif %}
            entity: binary_sensor.side_garage_water_leak_sensor_water_leak_detected
            icon_color: >-
              {% if is_state('binary_sensor.side_garage_water_leak_sensor_water_leak_detected','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
        visibility:
          - condition: state
            entity: binary_sensor.side_garage_water_leak_sensor_water_leak_detected
            state: 'on'
      - type: custom:auto-entities
        card:
          type: entities
          title: Low Battery Devices
        filter:
          include:
            - options: {}
              entity_id: '*_battery'
              state: <= 30
          exclude:
            - options: {}
              entity_id: sensor.garage_handle_lock_battery_voltage
            - options: {}
              entity_id: sensor.back_door_lock_battery_voltage
            - options: {}
              entity_id: sensor.front_door_lock_battery_voltage
        show_empty: false
        card_param: entities
        row:
          type: custom:template-entity-row
          name: |
            {{ state_attr(config.entity, 'friendly_name') }}
          state: |
            {{ states(config.entity) }}%
          secondary: >
            Type: {{ state_attr(config.entity, 'battery_type') }}, Qty: {{
            state_attr(config.entity, 'battery_quantity') }}
      - type: custom:mushroom-template-card
        primary: |-
          {% if is_state('input_boolean.leak_detected','off') %}
            No Leaks Detected
          {% else %}
            Leak Detected
          {% endif %}
        icon: |-
          {% if is_state('input_boolean.leak_detected','off') %}
            mdi:water-off-outline
          {% else %}
            mdi:pipe-leak
          {% endif %}
        features_position: bottom
        entity: input_boolean.leak_detected
        color: |-
          {% if is_state('input_boolean.leak_detected','off') %}
            green
          {% else %}
            red
          {% endif %}
        vertical: true
        tap_action:
          action: more-info
        icon_tap_action:
          action: more-info
        hold_action:
          action: toggle
        visibility:
          - condition: state
            entity: input_boolean.leak_detected
            state: 'off'
      - type: custom:mushroom-template-card
        icon: |-
          {% if is_state('binary_sensor.ecolink_firefighter','off') %}
            mdi:fire-off
          {% else %}
            mdi:fire-alert
          {% endif %}
        features_position: bottom
        entity: binary_sensor.ecolink_firefighter
        primary: |-
          {% if is_state('binary_sensor.ecolink_firefighter','off') %}
            No Fire Detected
          {% else %}
            Fire Detected
          {% endif %}
        color: |-
          {% if is_state('binary_sensor.ecolink_firefighter','off') %}
            green
          {% else %}
            red
          {% endif %}
        vertical: true
        icon_tap_action:
          action: more-info
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:solar-power
          primary: Energy Usage
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-template-card
                primary: HRV
                secondary: >
                  Monthly: {{ states('sensor.hrv_monthly_energy') | float(0) | round(2) }} kWh
                icon: mdi:hvac
                entity: sensor.hrv_plug_power
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                features_position: bottom
                vertical: true
              - type: custom:mushroom-template-card
                primary: Air Purifier
                secondary: >
                  Monthly: {{ states('sensor.air_purifier_monthly_energy') | float(0) | round(2) }} kWh
                icon: mdi:air-purifier
                entity: sensor.air_purifier_plug_power
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                features_position: bottom
                vertical: true
              - type: custom:mushroom-template-card
                primary: Washer
                secondary: >
                  Monthly: {{ states('sensor.washer_monthly_energy') | float(0) | round(2) }} kWh
                icon: mdi:washing-machine
                entity: sensor.washing_machine_power
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                features_position: bottom
                vertical: true
              - type: custom:mushroom-template-card
                primary: Fireplace
                secondary: >
                  Monthly: {{ states('sensor.fireplace_monthly_energy') | float(0) | round(2) }} kWh
                icon: mdi:fireplace
                entity: sensor.fireplace_power
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                features_position: bottom
                vertical: true
              - type: custom:mushroom-template-card
                primary: Basement
                secondary: >
                  Monthly: {{ states('sensor.basement_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:home-floor-b
                entity: sensor.basement_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
              - type: custom:mushroom-template-card
                primary: Dryer
                secondary: >
                  Monthly: {{ states('sensor.dryer_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:tumble-dryer
                entity: sensor.dryer_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
              - type: custom:mushroom-template-card
                primary: Furnace
                secondary: >
                  Monthly: {{ states('sensor.furnace_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:fire
                entity: sensor.furnace_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
              - type: custom:mushroom-template-card
                primary: Mech Room
                secondary: >
                  Monthly: {{ states('sensor.mech_room_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:engine
                entity: sensor.mech_room_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
              - type: custom:mushroom-template-card
                primary: AC
                secondary: >
                  Monthly: {{ states('sensor.ac_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:air-conditioner
                entity: sensor.ac_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
              - type: custom:mushroom-template-card
                primary: Dining Room
                secondary: >
                  Monthly: {{ states('sensor.dining_room_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:table-chair
                entity: sensor.dining_room_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
              - type: custom:mushroom-template-card
                primary: Living Room
                secondary: >
                  Monthly: {{ states('sensor.living_room_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:sofa
                entity: sensor.living_room_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
              - type: custom:mushroom-template-card
                primary: Bedrooms 2 & 3
                secondary: >
                  Monthly: {{ states('sensor.bed_2_3_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:bed
                entity: sensor.bed_2_3_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
              - type: custom:mushroom-template-card
                primary: Laundry
                secondary: >
                  Monthly: {{ states('sensor.laundry_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:tumble-dryer
                entity: sensor.laundry_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
              - type: custom:mushroom-template-card
                primary: Microwave
                secondary: >
                  Monthly: {{ states('sensor.microwave_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:microwave
                entity: sensor.microwave_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
              - type: custom:mushroom-template-card
                primary: Dishwasher
                secondary: >
                  Monthly: {{ states('sensor.dishwasher_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:dishwasher
                entity: sensor.dishwasher_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
              - type: custom:mushroom-template-card
                primary: Fridge
                secondary: >
                  Monthly: {{ states('sensor.fridge_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:fridge
                entity: sensor.fridge_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
              - type: custom:mushroom-template-card
                primary: Upstairs
                secondary: >
                  Monthly: {{ states('sensor.upstairs_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:home-floor-2
                entity: sensor.upstairs_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
              - type: custom:mushroom-template-card
                primary: Master Bedroom
                secondary: >
                  Monthly: {{ states('sensor.master_bedroom_energy_this_month') | float(0) | round(2) }} kWh
                icon: mdi:bed-double
                entity: sensor.master_bedroom_energy_this_month
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: green
                vertical: true
                features_position: bottom
      - type: custom:expander-card
        title-card-clickable: true
        title-card-button-overlay: true
        expanded: false
        padding: 1em
        child-margin-top: 0.6em
        title-card:
          type: custom:mushroom-template-card
          icon: mdi:water-circle
          primary: Water Usage
          layout: horizontal
          tap_action:
            action: none
        cards:
          - type: grid
            square: false
            columns: 2
            cards:
              - type: custom:mushroom-template-card
                primary: Flow Rate
                secondary: >
                  {{ states('sensor.droplet_flow_rate') | float(0) | round(2) }}
                  L/min
                icon: mdi:water-circle
                entity: sensor.droplet_flow_rate
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: >
                  {% set flow = states('sensor.droplet_flow_rate') | float(0) %}
                  {% set max_flow = 25 %} 
                  {% set clamped = [flow, max_flow] | min %} 
                  {% set pct = clamped / max_flow %} 
                  rgba(0, 120, 255, {{0.3 + (pct * 0.7) }})
                features_position: bottom
                vertical: true
              - type: custom:mushroom-template-card
                primary: Volume
                secondary: >
                  {{ states('sensor.droplet_volume') | float(0) | round(2) }}gal
                icon: mdi:cup-water
                entity: sensor.droplet_volume
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: >
                  {% set flow = states('sensor.droplet_volume') | float(0) %} 
                  {% set max_flow = 20 %} 
                  {% set clamped = [flow, max_flow] | min %} 
                  {% set pct = clamped / max_flow %} 
                  rgba(0, 120, 255, {{ 0.3 + (pct * 0.7) }})
                features_position: bottom
                vertical: true
              - type: custom:mushroom-template-card
                primary: Server Status
                secondary: |
                  {{ states('sensor.droplet_server_status') }}
                icon: mdi:web
                entity: sensor.droplet_server_status
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: |
                  {% if states('sensor.droplet_server_status') == 'Connected' %}
                    green
                  {% else %}
                    var(--secondary-text-color)
                  {% endif %}
                features_position: bottom
                vertical: true
              - type: custom:mushroom-template-card
                primary: Signal Quality
                secondary: |
                  {{ states('sensor.droplet_signal_quality') }}
                icon: mdi:waveform
                entity: sensor.droplet_signal_quality
                multiline_secondary: true
                tap_action:
                  action: more-info
                color: >
                  {% set s = states('sensor.droplet_signal_quality') %} 
                  {% if s == 'Strong Signal' %}
                    green
                  {% elif s == 'Weak Signal' %}
                    amber
                  {% elif s == 'No Signal' %}
                    red
                  {% else %}
                    var(--secondary-text-color)
                  {% endif %}
                features_position: bottom
                vertical: true
  - title: bedtime
    path: bedtime
    icon: mdi:sleep
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: action
            tap_action:
              action: navigate
              navigation_path: /dashboard-mushroom/0
            icon: mdi:arrow-left
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Home Mode
            secondary: "{{ states('input_select.home_mode') | title }}"
            icon: |-
              {% if is_state('input_select.home_mode','bedtime') %}
                mdi:sleep
              {% elif is_state('input_select.home_mode','awake') %}
                mdi:eye
              {% elif is_state('input_select.home_mode','not_home') %}
                mdi:home-export-outline
              {% elif is_state('input_select.home_mode','reading') %}
                mdi:book
              {% endif %}
            entity: input_select.home_mode
            tap_action:
              action: more-info
            color: |-
              {% if is_state('input_select.home_mode','bedtime') %}
                green
              {% else %}
                red
              {% endif %}
            vertical: true
            features_position: bottom
          - type: custom:mushroom-template-card
            primary: Library Door
            secondary: >-
              {% if is_state('binary_sensor.library_door_contact_sensor','on') %}
                Open
              {% else %}
                Closed
              {% endif %}
            icon: >-
              {% if is_state('binary_sensor.library_door_contact_sensor','on') %}
                mdi:door-open
              {% else %}
                mdi:door-closed
              {% endif %}
            entity: binary_sensor.library_door_contact_sensor
            icon_color: >-
              {% if is_state('binary_sensor.library_door_contact_sensor','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
            fill_container: true
            tap_action:
              action: more-info
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Garage Doors
            secondary: |-
              {% set main = states('cover.main_garage_door') %}
              {% set side = states('cover.side_garage_door') %}
              {% set open_doors = [] %}

              {% if main != 'closed' %}
                {% set open_doors = open_doors + ['Main'] %}
              {% endif %}
              {% if side != 'closed' %}
                {% set open_doors = open_doors + ['Side'] %}
              {% endif %}

              {% if open_doors | length == 0 %}
                Closed
              {% else %}
                Open: {{ open_doors | join(', ') }}
              {% endif %}
            icon: >
              {% if states('cover.main_garage_door') != 'closed' or
              states('cover.side_garage_door') != 'closed' %}
                mdi:garage-open-variant
              {% else %}
                mdi:garage-variant
              {% endif %}
            icon_color: >
              {% if states('cover.main_garage_door') != 'closed' or
              states('cover.side_garage_door') != 'closed' %}
                red
              {% else %}
                green
              {% endif %}
            entity: cover.main_garage_door
            layout: vertical
            fill_container: true
            tap_action:
              action: more-info
          - type: custom:mushroom-template-card
            primary: Exterior Doors
            secondary: >
              {% set open_doors = expand('group.outer_doors') |
              selectattr('state', 'eq', 'on') | map(attribute='name') | list %}
              {% set unlocked_locks = expand('group.outer_door_locks') |
              selectattr('state', 'ne', 'locked') | map(attribute='name') | list %}

              {% if open_doors | length == 0 and
              is_state('binary_sensor.outer_doors_locked', 'on') %}
                Closed & Locked
              {% else %}
                {% if open_doors | length > 0 %}
                  Open: {{ open_doors | join(', ') }}
                {% endif %}
                {% if unlocked_locks | length > 0 %}
                  {% if open_doors | length > 0 %} | {% endif %}
                  {{ unlocked_locks | join(', ') }}
                {% endif %}
              {% endif %}
            icon: >
              {% set open = (states('sensor.outer_doors_open') | int > 0) %} 
              {% set locked = is_state('binary_sensor.outer_doors_locked', 'on') %}
              {% if open and not locked %}
                mdi:lock-open-alert
              {% elif open %}
                mdi:door-open
              {% elif not locked %}
                mdi:lock-open-variant
              {% else %}
                mdi:lock-check
              {% endif %}
            icon_color: >
              {% if (states('sensor.outer_doors_open') | int > 0) 
              or not is_state('binary_sensor.outer_doors_locked', 'on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
            fill_container: true
            tap_action:
              action: more-info
            entity: binary_sensor.outer_doors_locked
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Fireplace
            secondary: |-
              {% if is_state('switch.fireplace','on') %}
                On
              {% else %}
                Off
              {% endif %}
            icon: |-
              {% if is_state('switch.fireplace','on') %}
                mdi:fireplace
              {% else %}
                mdi:fireplace-off
              {% endif %}
            entity: switch.fireplace
            icon_color: |-
              {% if is_state('switch.fireplace','on') %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
            fill_container: true
          - type: custom:mushroom-template-card
            primary: Leak Sensors
            secondary: |-
              {% if states('sensor.total_leaks_detected') | int > 0 %}
                Leaks Detected
              {% else %}
                All Dry
              {% endif %}
            icon: |-
              {% if states('sensor.total_leaks_detected') | int > 0 %}
                mdi:water
              {% else %}
                mdi:water-outline
              {% endif %}
            entity: sensor.total_leaks_detected
            icon_color: |-
              {% if states('sensor.total_leaks_detected') | int > 0 %}
                red
              {% else %}
                green
              {% endif %}
            layout: vertical
            fill_container: true
            tap_action:
              action: more-info
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-template-card
            primary: Time Mode
            secondary: "{{ states('input_select.time_mode') | title }}"
            icon: |-
              {% if is_state('input_select.time_mode','early') %}
                mdi:clock-time-nine-outline
              {% elif is_state('input_select.time_mode','late') %}
                mdi:clock-time-ten
              {% endif %}
            entity: input_select.time_mode
            tap_action:
              action: more-info
            color: |-
              {% if is_state('input_select.time_mode','early') %}
                green
              {% else %}
                default
              {% endif %}
            vertical: true
            features_position: bottom
  - type: sections
    max_columns: 4
    title: Dog
    path: dog
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                tap_action:
                  action: navigate
                  navigation_path: /dashboard-mushroom/0
                icon: mdi:arrow-left
          - type: custom:mushroom-title-card
            title: 🐶 Dog
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Last Fed
                secondary: >-
                  {% set last_time = states('input_datetime.dog_fed_last_time') %}
                  {% if last_time != 'unknown' and last_time != '' %}
                    {% set last_timestamp = as_timestamp(last_time) %}
                    {% if last_timestamp %}
                      {{ ((now().timestamp() - last_timestamp) / 3600) | round(1) }} hours ago
                    {% else %}
                      unknown
                    {% endif %}
                  {% else %}
                    unknown
                  {% endif %}
                icon: >-
                  {% set last_time = states('input_datetime.dog_fed_last_time') %}
                  {% if last_time != 'unknown' and last_time != '' %}
                    {% set last_timestamp = as_timestamp(last_time) %}
                    {% if last_timestamp and (now().timestamp() - last_timestamp) <= 86400 %}
                      mdi:bowl-mix
                    {% else %}
                      mdi:bowl-mix-outline
                    {% endif %}
                  {% else %}
                    mdi:bowl-mix-outline
                  {% endif %}
                entity: input_datetime.dog_fed_last_time
                icon_color: >-
                  {% set last_time = states('input_datetime.dog_fed_last_time') %}
                  {% if last_time != 'unknown' and last_time != '' %}
                    {% set last_timestamp = as_timestamp(last_time) %}
                    {% if last_timestamp and (now().timestamp() - last_timestamp) <= 86400 %}
                      green
                    {% else %}
                      red
                    {% endif %}
                  {% else %}
                    red
                  {% endif %}
                fill_container: true
                multiline_secondary: false
                layout: vertical
                tap_action:
                  action: perform-action
                  perform_action: automation.trigger
                  target:
                    entity_id: automation.event_dog_fed
                  data:
                    skip_condition: true
              - type: custom:mushroom-template-card
                primary: Last Out
                secondary: >-
                  {% set last_time = states('input_datetime.dog_out_potty_last_time') %}
                  {% if last_time != 'unknown' and last_time != '' %}
                    {% set last_timestamp = as_timestamp(last_time) %}
                    {% if last_timestamp %}
                      {{ ((now().timestamp() - last_timestamp) / 3600) | round(1) }} hours ago
                    {% else %}
                      unknown
                    {% endif %}
                  {% else %}
                    unknown
                  {% endif %}
                icon: >-
                  {% set last_time = states('input_datetime.dog_out_potty_last_time') %}
                  {% if last_time != 'unknown' and last_time != '' %}
                    {% set last_timestamp = as_timestamp(last_time) %}
                    {% if last_timestamp and (now().timestamp() - last_timestamp) <= 14400 %}
                      mdi:dog-side
                    {% else %}
                      mdi:dog-side-off
                    {% endif %}
                  {% else %}
                    mdi:dog-side-off
                  {% endif %}
                entity: input_datetime.dog_out_potty_last_time
                icon_color: >-
                  {% set last_time = states('input_datetime.dog_out_potty_last_time') %}
                  {% if last_time != 'unknown' and last_time != '' %}
                    {% set last_timestamp = as_timestamp(last_time) %}
                    {% if last_timestamp and (now().timestamp() - last_timestamp) <= 14400 %}
                      green
                    {% else %}
                      red
                    {% endif %}
                  {% else %}
                    red
                  {% endif %}
                fill_container: true
                multiline_secondary: false
                layout: vertical
                tap_action:
                  action: perform-action
                  perform_action: automation.trigger
                  target:
                    entity_id: automation.event_dog_out_potty
                  data:
                    skip_condition: true
            grid_options:
              columns: full
              rows: 2
          - type: custom:expander-card
            title-card-clickable: true
            title-card-button-overlay: true
            expanded: false
            padding: 1em
            child-margin-top: 0.6em
            title-card:
              type: custom:mushroom-template-card
              icon: mdi:dog
              primary: Dog
              layout: horizontal
              tap_action:
                action: none
            cards:
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:mushroom-entity-card
                    entity: input_text.dog_name
                    name: Name
                  - type: custom:mushroom-entity-card
                    entity: sensor.dog_age
                    name: Age (yrs)
                  - type: custom:mushroom-entity-card
                    entity: input_text.dog_birthdate
                    name: Birthdate
                  - type: custom:mushroom-entity-card
                    entity: input_number.dog_weight
                    name: Weight (lb)
                  - type: custom:mushroom-entity-card
                    entity: input_text.dog_microchip
                    name: Microchip
                  - type: custom:mushroom-entity-card
                    entity: input_text.dog_rabies_tag
                    name: Rabies Tag
          - type: custom:mushroom-title-card
            title: 🐱 Cat
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Last Feeding
                secondary: >-
                  {{ as_local(as_datetime(states('button.cat_feeder_feed'))).strftime('%H:%M') }}
                icon: mdi:cat
                entity: button.cat_feeder_feed
                fill_container: true
                tap_action:
                  action: perform-action
                  perform_action: button.press
                  target:
                    entity_id: button.cat_feeder_feed
                layout: vertical
                icon_color: >-
                  {% set last_feed = as_local(as_datetime(states('button.cat_feeder_feed'))) %}
                  {% set hours_since_feed = (now() - last_feed).total_seconds() / 3600 %}
                  {% if hours_since_feed <= 6 %}
                    green
                  {% elif hours_since_feed <= 12 %}
                    yellow
                  {% else %}
                    red
                  {% endif %}
              - type: custom:mushroom-template-card
                primary: Box Cleaned
                secondary: >-
                  {% set last_time = states('input_datetime.cleaned_litterbox_time') %}
                  {% if last_time != 'unknown' and last_time != '' %}
                    {% set last_timestamp = as_timestamp(last_time) %}
                    {% if last_timestamp %}
                      {{ ((now().timestamp() - last_timestamp) / 3600) | round(1) }} hours ago
                    {% else %}
                      unknown
                    {% endif %}
                  {% else %}
                    unknown
                  {% endif %}
                icon: >-
                  {% set last_time = states('input_datetime.cleaned_litterbox_time') %}
                  {% if last_time != 'unknown' and last_time != '' %}
                    {% set last_timestamp = as_timestamp(last_time) %}
                    {% if last_timestamp and (now().timestamp() - last_timestamp) <= 86400 %}
                      mdi:shimmer
                    {% else %}
                      mdi:emoticon-poop
                    {% endif %}
                  {% else %}
                    mdi:emoticon-poop
                  {% endif %}
                entity: input_datetime.cleaned_litterbox_time
                icon_color: >-
                  {% set last_time = states('input_datetime.cleaned_litterbox_time') %}
                  {% if last_time != 'unknown' and last_time != '' %}
                    {% set last_timestamp = as_timestamp(last_time) %}
                    {% if last_timestamp and (now().timestamp() - last_timestamp) <= 86400 %}
                      green
                    {% else %}
                      red
                    {% endif %}
                  {% else %}
                    red
                  {% endif %}
                fill_container: true
                multiline_secondary: false
                layout: vertical
                tap_action:
                  action: perform-action
                  perform_action: automation.trigger
                  target:
                    entity_id: automation.event_cleaned_litterbox
                  data:
                    skip_condition: true
            grid_options:
              columns: full
              rows: 2
          - type: custom:expander-card
            title-card-clickable: true
            title-card-button-overlay: true
            expanded: false
            padding: 1em
            child-margin-top: 0.6em
            title-card:
              type: custom:mushroom-template-card
              icon: mdi:cat
              primary: Cat
              layout: horizontal
              tap_action:
                action: none
            cards:
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:mushroom-entity-card
                    entity: input_text.cat_name
                    name: Name
                  - type: custom:mushroom-entity-card
                    entity: sensor.cat_age
                    name: Age (yrs)
                  - type: custom:mushroom-entity-card
                    entity: input_text.cat_birthdate
                    name: Birthdate
                  - type: custom:mushroom-entity-card
                    entity: input_number.cat_weight
                    name: Weight (lb)
                  - type: custom:mushroom-entity-card
                    entity: input_text.cat_microchip
                    name: Microchip
                  - type: custom:mushroom-entity-card
                    entity: input_text.cat_rabies_tag
                    name: Rabies Tag
    icon: mdi:dog
    cards: []
    badges: []
  - type: sections
    max_columns: 4
    title: Server/NAS
    path: server-nas
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                tap_action:
                  action: navigate
                  navigation_path: /dashboard-mushroom/0
                icon: mdi:arrow-left
          - type: custom:expander-card
            title-card-clickable: true
            title-card-button-overlay: true
            expanded: false
            padding: 1em
            child-margin-top: 0.6em
            title-card:
              type: custom:mushroom-template-card
              icon: mdi:nas
              primary: NAS
              secondary: Synology DS224+
              layout: horizontal
              tap_action:
                action: none
            cards:
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.ds224plus_volume_1_status
                    name: Status
                    icon: mdi:nas
                    icon_color: >
                      {% set status = states('sensor.ds224plus_volume_1_status') %} 
                      {% if status == 'normal' %}
                        green
                      {% elif status == 'background_raid_syncing' %}
                        blue
                      {% else %}
                        red
                      {% endif %}
                    primary: NAS Status
                    secondary: "{{ states('sensor.ds224plus_volume_1_status') | title }}"
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.ds224plus_volume_1_average_disk_temp
                    name: Disk Temp
                    icon: mdi:thermometer
                    icon_color: >
                      {% set temp = states('sensor.ds224plus_volume_1_average_disk_temp') | float %} 
                      {% if temp < 86 %}
                        green
                      {% elif temp < 105 %}
                        lime
                      {% elif temp < 122 %}
                        yellow
                      {% elif temp < 140 %}
                        orange
                      {% else %}
                        red
                      {% endif %}
                    primary: Disk Temp
                    secondary: >-
                      {{ states('sensor.ds224plus_volume_1_average_disk_temp') | float | round(0) }}°F
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.ds224plus_volume_1_used_space
                    name: Disk Usage
                    icon: >
                      {% set cpu = states('sensor.ds224plus_volume_1_volume_used') | float(0) %} 
                      {% if cpu < 30 %}
                        mdi:gauge-empty
                      {% elif cpu < 50 %}
                        mdi:gauge-low
                      {% elif cpu < 80 %}
                        mdi:gauge
                      {% else %}
                        mdi:gauge-full
                      {% endif %}
                    icon_color: >
                      {% set cpu = states('sensor.ds224plus_volume_1_volume_used') | float(0) %} 
                      {% if cpu < 30 %}
                        green
                      {% elif cpu < 50 %}
                        yellow
                      {% elif cpu < 80 %}
                        orange
                      {% else %}
                        red
                      {% endif %}
                    primary: Disk Use
                    secondary: >-
                      {{ states("sensor.ds224plus_volume_1_volume_used") | float | round(1) }}%
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.ds224plus_cpu_utilization_total
                    name: CPU Utilization
                    icon: >
                      {% set cpu = states('sensor.ds224plus_cpu_utilization_total') | float(0) %} 
                      {% if cpu < 20 %}
                        mdi:gauge-empty
                      {% elif cpu < 50 %}
                        mdi:gauge-low
                      {% elif cpu < 80 %}
                        mdi:gauge
                      {% else %}
                        mdi:gauge-full
                      {% endif %}
                    icon_color: >
                      {% set cpu = states('sensor.ds224plus_cpu_utilization_total') | float(0) %} 
                      {% if cpu < 20 %}
                        green
                      {% elif cpu < 50 %}
                        orange
                      {% elif cpu < 80 %}
                        darkorange
                      {% else %}
                        red
                      {% endif %}
                    primary: CPU Use (total)
                    secondary: >-
                      {{ states("sensor.ds224plus_cpu_utilization_total") | float | round(1) }}%
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: switch.synology_nas_power
                    name: Power
                    icon: mdi:power
                    icon_color: >
                      {% if is_state('sensor.ds224plus_volume_1_status', 'normal') %}
                        green
                      {% else %}
                        red
                      {% endif %}
                    primary: NAS Power
                    secondary: >
                      {% if is_state('sensor.ds224plus_volume_1_status', 'normal') %}
                        Online
                      {% else %}
                        Offline
                      {% endif %}
                    tap_action:
                      action: more-info
          - type: custom:expander-card
            title-card-clickable: true
            title-card-button-overlay: true
            expanded: false
            padding: 1em
            child-margin-top: 0.6em
            title-card:
              type: custom:mushroom-template-card
              icon: mdi:home-assistant
              primary: HA Hardware
              layout: horizontal
              tap_action:
                action: none
            cards:
              - type: grid
                square: false
                columns: 2
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.system_monitor_disk_usage
                    name: Disk Usage
                    icon: >
                      {% set storage = states('sensor.system_monitor_disk_usage') | float(0) %}
                      {% if storage < 20 %}
                        mdi:gauge-empty
                      {% elif storage < 50 %}
                        mdi:gauge-low
                      {% elif storage < 80 %}
                        mdi:gauge
                      {% else %}
                        mdi:gauge-full
                      {% endif %}
                    icon_color: >
                      {% set storage = states('sensor.system_monitor_disk_usage') | float(0) %}
                      {% if storage < 20 %}
                        green
                      {% elif storage < 50 %}
                        orange
                      {% elif storage < 80 %}
                        darkorange
                      {% else %}
                        red
                      {% endif %}
                    primary: Disk Usage
                    secondary: >-
                      {{ states('sensor.system_monitor_disk_usage') | float | round(1) }}%
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.system_monitor_memory_usage
                    name: Memory Usage
                    icon: >
                      {% set storage = states('sensor.system_monitor_memory_usage') | float(0) %}
                      {% if storage < 20 %}
                        mdi:gauge-empty
                      {% elif storage < 50 %}
                        mdi:gauge-low
                      {% elif storage < 80 %}
                        mdi:gauge
                      {% else %}
                        mdi:gauge-full
                      {% endif %}
                    icon_color: >
                      {% set storage = states('sensor.system_monitor_memory_usage') | float(0) %}
                      {% if storage < 20 %}
                        green
                      {% elif storage < 50 %}
                        orange
                      {% elif storage < 80 %}
                        darkorange
                      {% else %}
                        red
                      {% endif %}
                    primary: Memory Usage
                    secondary: >-
                      {{ states('sensor.system_monitor_memory_usage') | float | round(1) }}%
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.system_monitor_processor_temperature
                    name: Temperature
                    icon: mdi:thermometer
                    icon_color: >
                      {% set temp = states('sensor.system_monitor_memory_usage') | float %} 
                      {% if temp < 86 %}
                        green
                      {% elif temp < 105 %}
                        lime
                      {% elif temp < 122 %}
                        yellow
                      {% elif temp < 140 %}
                        orange
                      {% else %}
                        red
                      {% endif %}
                    primary: Temperature
                    secondary: >-
                      {{ states('sensor.system_monitor_processor_temperature') | float | round(1) }}°F
                    tap_action:
                      action: more-info
                  - type: custom:mushroom-template-card
                    entity: sensor.system_monitor_processor_use
                    name: Processor Use
                    icon: >
                      {% set cpu = states('sensor.system_monitor_processor_use') | float(0) %}  
                      {% if cpu < 20 %}
                        mdi:gauge-empty
                      {% elif cpu < 50 %}
                        mdi:gauge-low
                      {% elif cpu < 80 %}
                        mdi:gauge
                      {% else %}
                        mdi:gauge-full
                      {% endif %}
                    icon_color: >
                      {% set cpu = states('sensor.system_monitor_processor_use') | float(0) %}  
                      {% if cpu < 20 %}
                        green
                      {% elif cpu < 50 %}
                        orange
                      {% elif cpu < 80 %}
                        darkorange
                      {% else %}
                        red
                      {% endif %}
                    primary: Processor Use
                    secondary: >-
                      {{ states('sensor.system_monitor_processor_use') | float | round(1) }}%
                    tap_action:
                      action: more-info
          - type: custom:pi-hole
            device_id: [device_id]
            grid_options:
              columns: full
              rows: 1
            url: [pihole_url]
    icon: mdi:server
    cards: []
    badges: []
  - type: sections
    max_columns: 4
    title: Garden
    path: garden
    icon: mdi:flower
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: action
                tap_action:
                  action: navigate
                  navigation_path: /dashboard-mushroom/0
                icon: mdi:arrow-left
          - type: custom:mushroom-title-card
            title: 🐝 Garden Bed
          - type: custom:flower-card
            entity: plant.catnip
            battery_sensor: sensor.soil_moisture_battery
            show_bars:
              - moisture
              - temperature
              - illuminance
              - dli
            display_type: full
          - type: custom:mushroom-template-card
            primary: |
              Last Watered:
            secondary: >-
              {% set watered = states('input_datetime.garden_last_watered_time') %}
              {% set rained = states('sensor.ws2902_weather_last_rain') %}

              {% if watered in ['unknown', ''] and rained in ['unknown', ''] %}
                Never
              {% else %}
                {% set watered_ts = as_timestamp(watered) if watered not in ['unknown', ''] else 0 %}
                {% set rained_ts = as_timestamp(rained) if rained not in ['unknown', ''] else 0 %}
                {% set recent_ts = [watered_ts, rained_ts]|max %}
                {% set diff = (as_timestamp(now()) - recent_ts)|int %}

                {% if diff < 60 %}
                  Just now
                {% elif diff < 3600 %}
                  {{ (diff / 60) | round(0) }} minute{{ 's' if (diff / 60) > 1 else '' }} ago
                {% elif diff < 86400 %}
                  {{ (diff / 3600) | round(0) }} hour{{ 's' if (diff / 3600) > 1 else '' }} ago
                {% else %}
                  {{ (diff / 86400) | round(0) }} day{{ 's' if (diff / 86400) > 1 else '' }} ago
                {% endif %}
              {% endif %}
            icon: mdi:flower
            icon_color: >
              {% set last_watered = states('input_datetime.garden_last_watered_time') %}

              {% set last_rain = states('sensor.ws2902_weather_last_rain') %}

              {% set moisture_status = state_attr('plant.catnip', 'moisture_status') %}

              {% if last_watered == 'unknown' or last_rain == 'unknown' or moisture_status == none %}
                default
              {% else %}
                {% set last_watered_ts = as_timestamp(last_watered) %}
                {% set last_rain_ts = as_timestamp(last_rain) %}
                {% set now_ts = as_timestamp(now()) %}
                {% set recent_ts = [last_watered_ts, last_rain_ts]|max %}
                
                {% if (now_ts - recent_ts) > 86400 and moisture_status != 'High' %}
                  red
                {% else %}
                  green
                {% endif %}
              {% endif %}
            entity: sensor.ws2902_weather_last_rain
            layout: vertical
            fill_container: true
            multiline_secondary: false
            grid_options:
              columns: 6
              rows: 2
            tap_action:
              action: more-info
            hold_action:
              action: perform-action
              perform_action: automation.trigger
              target:
                entity_id: automation.event_watered_garden_bed
              data:
                skip_condition: true
          - type: entity
            entity: sensor.water_needed
            name: Water Needed
            icon: mdi:water-circle
